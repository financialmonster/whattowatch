{"version":3,"sources":["domains/auth/authConstants.ts","domains/auth/authReducer.ts","domains/promo/promoConstants.ts","domains/promo/promoReducer.ts","domains/films/filmsConstants.ts","domains/films/filmsReducer.ts","domains/reviews/reviewsConstants.ts","domains/reviews/reviewsReducer.ts","domains/favorites/favoritesConstants.ts","domains/favorites/favoritesReducer.ts","mainConstants.ts","init/rootReducer.ts","domains/promo/promoActions.ts","api.ts","domains/promo/saga/workerFetchPromo.ts","domains/promo/saga/promoWatchers.ts","domains/films/filmsActions.ts","domains/films/saga/workerFetchFilms.ts","domains/films/saga/filmsWatchers.ts","domains/auth/authActions.ts","domains/auth/saga/workerFetchAuth.ts","domains/auth/saga/workerFetchAuthStatus.ts","domains/auth/saga/authWatchers.ts","domains/reviews/reviewsActions.ts","domains/reviews/saga/workerFetchReviews.ts","domains/reviews/saga/workerFetchReview.ts","domains/reviews/saga/reviewsWatchers.ts","domains/favorites/favoritesActions.ts","domains/favorites/saga/workerFetchFavorites.ts","domains/favorites/saga/workerFetchFavorite.ts","domains/favorites/saga/favoritesWatchers.ts","init/rootSaga.ts","init/store.ts","hooks/useVideoPlayerProgress.ts","domains/auth/authSelectors.ts","domains/promo/promoSelectors.ts","hooks/useLogoLinkClick.ts","components/logo/Logo.tsx","hooks/useFilmsPagePush.ts","components/header/Header.tsx","hooks/useSignInLinkClick.ts","utils.ts","components/spinner/Spinner.tsx","components/videoPlayer/VideoPlayer.tsx","hooks/useActiveVideoPlayer.ts","hooks/usePlayingVideo.ts","domains/favorites/favoritesSelectors.ts","domains/films/filmsSelectors.ts","hooks/useFetchFavorite.ts","components/notification/Notification.tsx","components/filmButtons/FilmButtons.tsx","components/promo/Promo.tsx","components/promoContainer/PromoContainer.tsx","hooks/useFetchPromo.ts","hooks/useFetchFilms.ts","components/film/Film.tsx","components/filmsList/FilmsList.tsx","components/filmsListContainer/FilmsListContainer.tsx","hooks/useFilmsListBatch.ts","components/genreFilter/GenreFilter.tsx","hooks/useGenreFilter.ts","components/footer/Footer.tsx","pages/mainPage/MainPage.tsx","formShapes.ts","components/loginForm/LoginForm.tsx","components/loginFormContainer/LoginFormContainer.tsx","hooks/useFetchAuth.ts","pages/loginPage/LoginPage.tsx","components/overviewTab/OverviewTab.tsx","components/detailsTab/DetailsTab.tsx","domains/reviews/reviewsSelectors.ts","components/review/Review.tsx","components/reviewsTab/ReviewsTab.tsx","hooks/useFetchReviews.ts","components/detailedFilm/DetailedFilm.tsx","hooks/useSetFilm.ts","components/similarFilms/SimilarFilms.tsx","pages/filmPage/FilmPage.tsx","components/radioBtn/RadioBtn.tsx","components/reviewForm/ReviewForm.tsx","components/reviewFormContainer/ReviewFormContainer.tsx","hooks/useFetchReview.ts","pages/reviewPage/ReviewPage.tsx","components/favoritesFilmsContainer/FavoritesFilmsContainer.tsx","hooks/useFetchFavorites.ts","pages/favoritesPage/FavoritesPage.tsx","components/app/App.tsx","hooks/useFetchAuthStatus.ts","index.tsx"],"names":["AuthActionTypes","PromoActionTypes","initialStateImmutable","Map","user","authError","isAuthFetching","authStatusError","isAuthStatusFetching","authReducer","state","action","type","FETCH_AUTH_REQUEST","set","FETCH_AUTH_SUCCESS","payload","FETCH_AUTH_FAIL","FETCH_AUTH_STATUS_REQUEST","FETCH_AUTH_STATUS_SUCCESS","FETCH_AUTH_STATUS_FAIL","AUTH_STATUS_UNAUTHORIZED","FilmsActionTypes","initialState","promo","isPromoFetching","promoError","promoReducer","FETCH_PROMO_REQUEST","FETCH_PROMO_SUCCESS","fromJS","FETCH_PROMO_FAIL","ReviewsActionTypes","films","List","isFilmsFetching","filmsError","filter","film","filmsReducer","FETCH_FILMS_REQUEST","FETCH_FILMS_SUCCESS","FETCH_FILMS_FAIL","SET_FILTER","SET_FILM","FavoritesActionTypes","reviews","id","data","isReviewsFetching","reviewsError","isReviewFetching","reviewError","reviewsReducer","FETCH_REVIEWS_REQUEST","FETCH_REVIEWS_SUCCESS","FETCH_REVIEWS_FAIL","FETCH_REVIEW_REQUEST","FETCH_REVIEW_SUCCESS","FETCH_REVIEW_FAIL","Routes","HttpStatusCodes","favorites","isFavoritesFetching","favoritesError","isFavoriteFetching","favoriteError","favoritesReducer","FETCH_FAVORITES_REQUEST","FETCH_FAVORITES_SUCCESS","adaptedFavorites","Array","isArray","FETCH_FAVORITES_FAIL","FETCH_FAVORITE_REQUEST","FETCH_FAVORITE_SUCCESS","FETCH_FAVORITE_FAIL","persistConfig","transforms","immutableTransform","key","storage","history","createBrowserHistory","routerReducer","connectRouter","rootReducer","combineReducers","router","auth","persistedRootReducer","persistReducer","promoActions","error","BASE_URL","api","fetchPromo","fetch","fetchFilms","fetchAuth","userData","method","headers","body","JSON","stringify","credentials","fetchAuthStatus","fetchReviews","fetchReview","reviewData","rating","comment","fetchFavorites","fetchFavorite","status","workFetchPromo","call","response","SUCCESS_STATUS_CODE","Error","json","put","watchFetchPromo","watchPromo","takeLatest","all","filmsActions","workFetchFilms","watchFetchFilms","watchFilms","authActions","workFetchAuth","workFetchAuthStatus","UNAUTHORIZED_STATUS_CODE","watchFetchAuth","watchFetchAuthStatus","watchAuth","reviewsActions","workFetchReviews","workFetchReview","push","watchFetchReviews","watchFetchReview","watchReviews","favoritesActions","workFetchFavorites","workFetchFavorite","watchFetchFavorites","watchFetchFavorite","watchFavorites","rootSaga","routerMiddleware","createRouterMiddleware","sagaMiddleware","createSagaMiddleware","middlewares","createLogger","duration","collapsed","colors","title","prevState","nextState","store","createStore","composeWithDevTools","applyMiddleware","persistedStore","persistStore","run","interval","getUser","get","getAuthError","getIsAuthFetching","getAuthStatusError","getIsAuthStatusFetching","getIsPromoFetching","getPromoError","getPromo","useLogoLinkClick","isMain","useLocation","pathname","MAIN_PAGE","dispatch","useDispatch","useCallback","Logo","isMainPage","logoLinkClickHandler","isFooter","logoLinkStyle","cursor","logoLinkClass","cn","className","onClick","style","useFilmsPagePush","Header","backgroundImage","name","posterImage","useSelector","authSelectors","promoSelectors","avatar","isFilmPage","includes","isReviewPage","isFavoritesPage","FAVORITES_PAGE","isLoginPage","LOGIN_PAGE","signInLinkClickHandler","useSignInLinkClick","navLinkClickHandler","avatarImgClickHandler","userBlockJSX","avatarImgStyle","src","height","alt","width","headerClass","getTimeFromMins","mins","h","m","moment","utc","hours","minutes","seconds","format","isRefInitialized","ref","current","isFilms","size","rotation","keyframes","SpinnerWrapper","styled","div","Petal","rotate","delay","transformDegs","animationDelays","Spinner","Children","toArray","fill","map","_","idx","VideoPlayer","memo","forwardRef","props","handleExitBtnClick","runTime","isPlaying","isVideoLoading","onCanPlayThroughHandler","progress","useState","setProgress","useEffect","setInterval","currentTime","clearInterval","isFinite","useVideoPlayerProgress","isActive","setIsActive","playPauseBtnHandler","pause","play","exitBtnClickHandler","useActiveVideoPlayer","playerStyle","display","restTimeFormatted","useMemo","onCanPlayThrough","poster","value","max","left","viewBox","xlinkHref","requestFullscreen","usePlayingVideo","setIsPlaying","setIsVideoLoading","videoRef","useRef","playBtnClickHandler","document","overflow","getIsFavoritesFetching","getFavoritesError","getFavorites","getIsFavoriteFetching","getFavoriteError","getIsFilmsFetching","getFilmsError","getFilms","selectGenres","createSelector","genres","toSet","slice","sort","Set","concat","getFilter","getFilm","selectFilmsByGenre","useFetchFavorite","favorite","favoriteId","filmsSelectors","promoInFilms","find","isFavorite","favoritesSelectors","myListBtnClickHandler","NotificationWrapper","Notification","children","FilmButtons","detailed","useParams","addReviewBtnClickHandler","isPromo","message","Promo","PromoContainer","useFetchPromo","verifiedPromo","useFetchFilms","Film","filmDivClickHandler","FilmsList","React","filmsJSX","FilmsListContainer","batchedFilms","hasMoreFilms","batch","setBatch","requestNextBatch","useFilmsListBatch","filteredFilms","showMoreBtnClickHandler","GenreFilter","genresJSX","genreItemClickHander","genre","useGenreFilter","isGenres","isCurrentGenre","genreClass","genreLinkStyle","Footer","MainPage","divStyle","backgroundColor","loginFormShape","initialValues","email","password","schema","object","shape","string","min","required","trim","reviewFormShape","LoginForm","loginFormSubmitHandler","onSubmit","validationSchema","isValid","placeholder","htmlFor","disabled","LoginFormContainer","useFetchAuth","LoginPage","to","OverviewTab","scoresCount","description","director","starring","Math","floor","mapRatingToMark","join","DetailsTab","released","getIsReviewsFetching","getReviewsError","getReviews","getIn","getReviewsId","getIsReviewFetching","getReviewError","Review","number","review","date","Date","parse","year","getFullYear","month","getMonth","day","getDate","dateTime","ReviewsTab","reviewsJSX","leftColReviewsJSX","rightColReviewsJSX","reviewsSelectors","reviewsId","useFetchReviews","isReviews","a","b","ind","DetailedFilm","currentTab","setCurrentTab","window","scrollTo","currentFilm","useSetFilm","tab","navLinksJSX","isCurrentTab","navItemClass","navLinkStyle","toFixed","SimilarFilms","similarFilms","el","selectSimilarFilmsFactory","FilmPage","sectionStyle","RadioBtn","groupValue","field","onChange","onBlur","checked","ReviewForm","reviewFormSubmitHandler","values","component","as","ReviewFormContainer","userReview","useFetchReview","verifiedIsReviewFetching","handleReviewFormSubmit","ReviewPage","FavoritesFilmsContainer","favoritesList","useFetchFavorites","FavoritesPage","App","useFetchAuthStatus","path","exact","FILM_PAGE","REVIEW_PAGE","ReactDOM","render","persistor","loading","querySelector"],"mappings":"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","file":"static/js/main.7ec6aabc.chunk.js","sourcesContent":["export enum AuthActionTypes {\n    FETCH_AUTH_REQUEST = `FETCH_AUTH_REQUEST`,\n    FETCH_AUTH_SUCCESS = `FETCH_AUTH_SUCCESS`,\n    FETCH_AUTH_FAIL = `FETCH_AUTH_FAIL`,\n    FETCH_AUTH_STATUS_REQUEST = `FETCH_AUTH_STATUS_REQUEST`,\n    FETCH_AUTH_STATUS_SUCCESS = `FETCH_AUTH_STATUS_SUCCESS`,\n    FETCH_AUTH_STATUS_FAIL = `FETCH_AUTH_STATUS_FAIL`,\n    AUTH_STATUS_UNAUTHORIZED = `AUTH_STATUS_UNAUTHORIZED`\n}\n","import { Map } from 'immutable';\n\nimport { TAuthState, TAuthActions } from './authTypes';\nimport { AuthActionTypes } from './authConstants';\n\nconst initialState: TAuthState = {\n    user: null,\n    authError: null,\n    isAuthFetching: false,\n    authStatusError: null,\n    isAuthStatusFetching: false\n}\n\nconst initialStateImmutable = Map(initialState);\n\nconst authReducer = (state = initialStateImmutable, action: TAuthActions): typeof initialStateImmutable => {\n    switch (action.type) {\n        case AuthActionTypes.FETCH_AUTH_REQUEST:\n            return state.set(`authError`, null)\n                        .set(`isAuthFetching`, true);\n\n        case AuthActionTypes.FETCH_AUTH_SUCCESS:\n            return state.set(`user`, Map(action.payload))\n                        .set(`isAuthFetching`, false); \n                \n        case AuthActionTypes.FETCH_AUTH_FAIL:\n            return state.set(`user`, null)\n                        .set(`isAuthFetching`, false)\n                        .set(`authError`, action.payload);\n\n        case AuthActionTypes.FETCH_AUTH_STATUS_REQUEST:\n            return state.set(`authStatusError`, null)\n                        .set(`isAuthStatusFetching`, true);\n\n        case AuthActionTypes.FETCH_AUTH_STATUS_SUCCESS:\n            return state.set(`user`, Map(action.payload))\n                        .set(`isAuthStatusFetching`, false);\n\n        case AuthActionTypes.FETCH_AUTH_STATUS_FAIL:\n            return state.set(`user`, null)\n                        .set(`isAuthStatusFetching`, false)\n                        .set(`authStatusError`, action.payload);\n\n        case AuthActionTypes.AUTH_STATUS_UNAUTHORIZED:\n            return state.set(`user`, null)\n                        .set(`isAuthStatusFetching`, false);\n\n        default:\n            // eslint-disable-next-line no-case-declarations,@typescript-eslint/no-unused-vars\n            const x: never = action;\n    }\n\n    return state;\n}\n\nexport default authReducer;\n","export enum PromoActionTypes {\n    FETCH_PROMO_REQUEST = `FETCH_PROMO_REQUEST`,\n    FETCH_PROMO_SUCCESS = `FETCH_PROMO_SUCCESS`,\n    FETCH_PROMO_FAIL = `FETCH_PROMO_FAIL`\n}\n","import { Map, fromJS } from 'immutable';\n\nimport { TPromoState, TPromoActions } from './promoTypes';\nimport { PromoActionTypes } from './promoConstants';\n\nconst initialState: TPromoState = {\n    promo: Map(),\n    isPromoFetching: true,\n    promoError: null\n}\n\nconst initialStateImmutable = Map(initialState);\n\nconst promoReducer = (state = initialStateImmutable, action: TPromoActions): typeof initialStateImmutable => {\n    switch(action.type) {\n        case PromoActionTypes.FETCH_PROMO_REQUEST:\n            return state.set(`promoError`, null)\n                        .set(`isPromoFetching`, true);\n\n        case PromoActionTypes.FETCH_PROMO_SUCCESS:\n            return state.set(`promo`, fromJS(action.payload))\n                        .set(`isPromoFetching`, false);\n\n        case PromoActionTypes.FETCH_PROMO_FAIL:\n            return state.set(`promo`, Map())\n                        .set(`isPromoFetching`, false)\n                        .set(`promoError`, action.payload);\n\n        default:\n            // eslint-disable-next-line no-case-declarations,@typescript-eslint/no-unused-vars\n            const x: never = action;\n    }\n\n    return state;\n}\n\nexport default promoReducer;\n","export enum FilmsActionTypes {\n    FETCH_FILMS_REQUEST = `FETCH_FILMS_REQUEST`,\n    FETCH_FILMS_SUCCESS = `FETCH_FILMS_SUCCESS`,\n    FETCH_FILMS_FAIL = `FETCH_FILMS_FAIL`,\n    SET_FILTER = `SET_FILTER`,\n    SET_FILM = `SET_FILM`\n}\n","import { List, fromJS, Map } from 'immutable';\n\nimport { TFilmsState, TFilmsActions } from './filmsTypes';\nimport { FilmsActionTypes } from './filmsConstants';\n\nconst initialState: TFilmsState = {\n    films: List(),\n    isFilmsFetching: true,\n    filmsError: null,\n    filter: `All genres`,\n    film: null\n}\n\nconst initialStateImmutable = Map(initialState);\n\nconst filmsReducer = (state = initialStateImmutable, action: TFilmsActions): typeof initialStateImmutable => {\n    switch (action.type) {\n        case FilmsActionTypes.FETCH_FILMS_REQUEST:\n            return state.set(`filmsError`, null)\n                        .set(`isFilmsFetching`, true);\n\n        case FilmsActionTypes.FETCH_FILMS_SUCCESS:\n            return state.set(`films`, fromJS(action.payload))\n                        .set(`isFilmsFetching`, false);\n\n        case FilmsActionTypes.FETCH_FILMS_FAIL:\n            return state.set(`films`, List())\n                        .set(`isFilmsFetching`, false)\n                        .set(`filmsError`, action.payload);\n\n        case FilmsActionTypes.SET_FILTER:\n            return state.set(`filter`, action.payload);\n\n        case FilmsActionTypes.SET_FILM:\n            return state.set(`film`, action.payload);\n\n        default:\n            // eslint-disable-next-line no-case-declarations,@typescript-eslint/no-unused-vars\n            const x: never = action;\n    }\n\n    return state;\n}\n\nexport default filmsReducer;\n","export enum ReviewsActionTypes {\n    FETCH_REVIEWS_REQUEST = `FETCH_REVIEWS_REQUEST`,\n    FETCH_REVIEWS_SUCCESS = `FETCH_REVIEWS_SUCCESS`,\n    FETCH_REVIEWS_FAIL = `FETCH_REVIEWS_FAIL`,\n    FETCH_REVIEW_REQUEST = `FETCH_REVIEW_REQUEST`,\n    FETCH_REVIEW_SUCCESS = `FETCH_REVIEW_SUCCESS`,\n    FETCH_REVIEW_FAIL = `FETCH_REVIEW_FAIL`\n}\n","import { List, fromJS, Map } from 'immutable';\n\nimport { TReviewsState, TReviewsActions } from './reviewsTypes';\nimport { ReviewsActionTypes } from './reviewsConstants';\n\nconst initialState: TReviewsState = {\n    reviews: fromJS({ id: null, data: List()}),\n    isReviewsFetching: true, \n    reviewsError: null,\n    isReviewFetching: false,\n    reviewError: null\n}\n\nconst initialStateImmutable = Map(initialState);\n\nconst reviewsReducer = (state = initialStateImmutable, action: TReviewsActions): typeof initialStateImmutable => {\n    switch (action.type) {\n        case ReviewsActionTypes.FETCH_REVIEWS_REQUEST:\n            return state.set(`reviewsError`, null)\n                        .set(`isReviewsFetching`, true);\n\n        case ReviewsActionTypes.FETCH_REVIEWS_SUCCESS:\n            return state.set(`reviews`, fromJS(action.payload))\n                        .set(`isReviewsFetching`, false);\n\n        case ReviewsActionTypes.FETCH_REVIEWS_FAIL:\n            return state.set(`reviews`, fromJS({id: null, data: List()}))\n                        .set(`isReviewsFetching`, false)\n                        .set(`reviewsError`, action.payload);\n\n        case ReviewsActionTypes.FETCH_REVIEW_REQUEST:\n            return state.set(`reviewError`, null)\n                        .set(`isReviewFetching`, true);\n\n        case ReviewsActionTypes.FETCH_REVIEW_SUCCESS:\n            return state.set(`reviews`, fromJS(action.payload))\n                        .set(`isReviewFetching`, false)\n                        .set(`isReviewsFetching`, false);\n\n        case ReviewsActionTypes.FETCH_REVIEW_FAIL:\n            return state.set(`isReviewFetching`, false)\n                        .set(`isReviewsFetching`, false)\n                        .set(`reviewError`, action.payload);\n\n        default:\n            // eslint-disable-next-line no-case-declarations,@typescript-eslint/no-unused-vars\n            const x: never = action;\n    }\n\n    return state;\n}\n\nexport default reviewsReducer;\n","export enum FavoritesActionTypes {\n    FETCH_FAVORITES_REQUEST = `FETCH_FAVORITES_REQUEST`,\n    FETCH_FAVORITES_SUCCESS = `FETCH_FAVORITES_SUCCESS`,\n    FETCH_FAVORITES_FAIL = `FETCH_FAVORITES_FAIL`,\n    FETCH_FAVORITE_REQUEST = `FETCH_FAVORITE_REQUEST`,\n    FETCH_FAVORITE_SUCCESS = `FETCH_FAVORITE_SUCCESS`,\n    FETCH_FAVORITE_FAIL = `FETCH_FAVORITE_FAIL`\n}\n","import { List, fromJS, Map } from 'immutable';\n\nimport { TFavoritesState, TFavoritesActions } from './favoritesTypes';\nimport { FavoritesActionTypes } from './favoritesConstants';\n\nconst initialState: TFavoritesState = {\n    favorites: List(),\n    isFavoritesFetching: true,\n    favoritesError: null,\n    isFavoriteFetching: false,\n    favoriteError: null\n}\n\nconst initialStateImmutable = Map(initialState);\n\nconst favoritesReducer = (state = initialStateImmutable, action: TFavoritesActions): typeof initialStateImmutable => {\n    switch (action.type) {\n        case FavoritesActionTypes.FETCH_FAVORITES_REQUEST:\n            return state.set(`favoritesError`, null)\n                        .set(`isFavoritesFetching`, true);\n\n        case FavoritesActionTypes.FETCH_FAVORITES_SUCCESS:\n            const adaptedFavorites = (Array.isArray(action.payload)) ? action.payload : [ action.payload ];\n\n            return state.set(`favorites`, fromJS(adaptedFavorites))\n                        .set(`isFavoritesFetching`, false);\n\n        case FavoritesActionTypes.FETCH_FAVORITES_FAIL:\n            return state.set(`favorites`, List())\n                        .set(`isFavoritesFetching`, false)\n                        .set(`favoritesError`, action.payload);\n\n        case FavoritesActionTypes.FETCH_FAVORITE_REQUEST:\n            return state.set(`favoriteError`, null)\n                        .set(`isFavoriteFetching`, true);\n\n        case FavoritesActionTypes.FETCH_FAVORITE_SUCCESS:\n            return state.set(`isFavoriteFetching`, false);\n\n        case FavoritesActionTypes.FETCH_FAVORITE_FAIL:\n            return state.set(`isFavoriteFetching`, false)\n                        .set(`favoriteError`, action.payload);\n\n        default:\n            // eslint-disable-next-line no-case-declarations,@typescript-eslint/no-unused-vars\n            const x: never = action;\n    }\n\n    return state;\n}\n\nexport default favoritesReducer;\n","export enum Routes {\n    MAIN_PAGE = '/',\n    LOGIN_PAGE = '/login',\n    FILM_PAGE = '/film/:id',\n    REVIEW_PAGE = '/film/:id/review',\n    FAVORITES_PAGE = '/mylist'\n}\n\nexport enum HttpStatusCodes {\n    SUCCESS_STATUS_CODE = 200,\n    NOT_FOUND_STATUS_CODE = 404,\n    UNAUTHORIZED_STATUS_CODE = 401\n}; \n","import { connectRouter } from 'connected-react-router/immutable';\nimport { combineReducers } from 'redux';\nimport { createBrowserHistory } from 'history';\nimport { persistReducer } from 'redux-persist';\nimport storage from 'redux-persist/lib/storage';\nimport immutableTransform from 'redux-persist-transform-immutable';\n\nimport authReducer from 'domains/auth/authReducer';\nimport promoReducer from 'domains/promo/promoReducer';\nimport filmsReducer from 'domains/films/filmsReducer';\nimport reviewsReducer from 'domains/reviews/reviewsReducer';\nimport favoritesReducer from 'domains/favorites/favoritesReducer';\n\nconst persistConfig = {\n    transforms: [immutableTransform()],\n    key: `root`,\n    storage\n}\n\nexport const history = createBrowserHistory();\nconst routerReducer = connectRouter(history);\n\nconst rootReducer = combineReducers({\n    router: routerReducer,\n    auth: authReducer,\n    promo: promoReducer,\n    films: filmsReducer,\n    reviews: reviewsReducer,\n    favorites: favoritesReducer\n});\n\nexport const persistedRootReducer = persistReducer(persistConfig, rootReducer);\n","import { PromoActionTypes } from './promoConstants';\nimport { TPromoActions } from './promoTypes';\nimport { TFilm } from 'types';\n\nexport const promoActions = {\n    fetchPromoRequest: (): TPromoActions => ({ type: PromoActionTypes.FETCH_PROMO_REQUEST }),\n\n    fetchPromoSuccess: (promo: TFilm): TPromoActions =>({\n        type: PromoActionTypes.FETCH_PROMO_SUCCESS,\n        payload: promo\n    }),\n    \n    fetchPromoFail: (error: Error): TPromoActions => ({\n        type: PromoActionTypes.FETCH_PROMO_FAIL,\n        error: true,\n        payload: error\n    })\n}\n","import { TUserData, TUserReview }  from 'types';\n\nconst BASE_URL = `https://htmlacademy-react-3.appspot.com/wtw`;\n\nconst api = {\n    promo: {\n        fetchPromo: () => fetch(`${BASE_URL}/films/promo`)\n    },\n    films: {\n        fetchFilms: () => fetch(`${BASE_URL}/films`)\n    },\n    auth: {\n        fetchAuth: (userData: TUserData) => fetch(`${BASE_URL}/login`, {\n            method: `POST`,\n\t\t\theaders: {\n                'Content-Type': `application/json`\n\t\t\t},\n            body: JSON.stringify(userData),\n            credentials:`include`\n        }),\n        \n        fetchAuthStatus: () => fetch(`${BASE_URL}/login`, {\n            method: `GET`,\n\t\t\theaders: {\n                'Content-Type': `application/json`\n\t\t\t},\n            credentials:`include`\n        })\n    },\n    reviews: {\n        fetchReviews: (id: number) => fetch(`${BASE_URL}/comments/${id}`),\n        fetchReview: (id: number, reviewData: TUserReview) => fetch(`${BASE_URL}/comments/${id}`, {\n            method: `POST`,\n            headers: {\n                'Content-Type': `application/json`\n            },\n            body: JSON.stringify({\n                rating: reviewData.rating,\n                comment: reviewData[\"review-text\"]\n            }),\n            credentials:`include`\n        })\n    },\n    favorites: {\n        fetchFavorites: () => fetch(`${BASE_URL}/favorite`, {\n            method: `GET`,\n            headers: {\n                'Content-Type': `application/json`\n            },\n            credentials: `include`\n        }),\n        fetchFavorite: (id: number, status: number) => fetch(`${BASE_URL}/favorite/${id}/${status}`, {\n            method: `POST`,\n            credentials: `include`\n        })\n    }\n}\n\nexport default api;\n","import { put, call } from 'redux-saga/effects';\nimport { SagaIterator } from '@redux-saga/core';\n\nimport { promoActions } from 'domains/promo/promoActions';\nimport api from 'api';\nimport { HttpStatusCodes } from 'mainConstants';\nimport { TFilm } from 'types';\n\nexport function* workFetchPromo(): SagaIterator {\n    try {\n        const response: Response = yield call(api.promo.fetchPromo);\n\n        if(response.status !== HttpStatusCodes.SUCCESS_STATUS_CODE) {\n            throw new Error(`Can't receive the promo film`)\n        }\n\n        const film: TFilm = yield call([response, response.json]);\n\n        yield put(promoActions.fetchPromoSuccess(film));\n    } catch(err) {\n        yield put(promoActions.fetchPromoFail(err));\n    }\n}\n","import { takeLatest, all, call } from 'redux-saga/effects';\nimport { SagaIterator } from '@redux-saga/core';\n\nimport { PromoActionTypes } from 'domains/promo/promoConstants';\nimport { workFetchPromo } from './workerFetchPromo';\n\nfunction* watchFetchPromo(): SagaIterator {\n    yield takeLatest(PromoActionTypes.FETCH_PROMO_REQUEST, workFetchPromo);\n}\n\nexport function* watchPromo(): SagaIterator {\n    yield all([call( watchFetchPromo )]);\n}\n","import { Map } from 'immutable';\n\nimport { FilmsActionTypes }  from './filmsConstants';\nimport { TFilmsActions } from './filmsTypes';\nimport { TFilms } from 'types';\n\nexport const filmsActions = {\n    fetchFilmsRequest: (): TFilmsActions => ({ type: FilmsActionTypes.FETCH_FILMS_REQUEST }),\n\n    fetchFilmsSuccess: (films: TFilms): TFilmsActions => ({\n        type: FilmsActionTypes.FETCH_FILMS_SUCCESS,\n        payload: films\n    }),\n\n    fetchFilmsFail: (error: Error): TFilmsActions => ({\n        type: FilmsActionTypes.FETCH_FILMS_FAIL,\n        error: true,\n        payload: error\n    }),\n\n    setFilter: (filter: string): TFilmsActions => ({\n        type: FilmsActionTypes.SET_FILTER,\n        payload: filter\n    }),\n\n    setFilm: (film: Map<string, any>): TFilmsActions => ({\n        type: FilmsActionTypes.SET_FILM,\n        payload: film\n    })\n}\n","import { put, call } from 'redux-saga/effects';\nimport { SagaIterator } from '@redux-saga/core';\n\nimport api from 'api';\nimport { filmsActions } from 'domains/films/filmsActions';\nimport { HttpStatusCodes } from 'mainConstants';\nimport { TFilms } from 'types';\n\nexport function* workFetchFilms(): SagaIterator {\n    try {\n        const response: Response = yield call(api.films.fetchFilms);\n\n        if(response.status !== HttpStatusCodes.SUCCESS_STATUS_CODE) {\n            throw new Error(`Can't receive the list of films`);\n        }\n\n        const films: TFilms = yield call([response, response.json]);\n\n        yield put(filmsActions.fetchFilmsSuccess(films));\n    } catch(err) {\n        yield put(filmsActions.fetchFilmsFail(err));\n    }\n}\n","import { takeLatest, all, call } from 'redux-saga/effects';\nimport { SagaIterator } from '@redux-saga/core';\n\nimport { FilmsActionTypes } from 'domains/films/filmsConstants';\nimport { workFetchFilms } from './workerFetchFilms';\n\nfunction* watchFetchFilms(): SagaIterator {\n    yield takeLatest(FilmsActionTypes.FETCH_FILMS_REQUEST, workFetchFilms);\n}\n\nexport function* watchFilms(): SagaIterator {\n    yield all([call( watchFetchFilms )]);\n}\n","import { AuthActionTypes }  from './authConstants';\nimport { TAuthActions } from './authTypes';\nimport { TUserData, TUser } from 'types';\n\nexport const authActions = {\n    fetchAuthRequest: (userData: TUserData): TAuthActions => ({\n        type: AuthActionTypes.FETCH_AUTH_REQUEST,\n        payload: userData\n    }),\n\n    fetchAuthSuccess: (user: TUser): TAuthActions => ({\n        type: AuthActionTypes.FETCH_AUTH_SUCCESS,\n        payload: user\n    }),\n\n    fetchAuthFail: (error: Error): TAuthActions => ({\n        type: AuthActionTypes.FETCH_AUTH_FAIL,\n        error: true,\n        payload: error\n    }),\n\n    fetchAuthStatusRequest: (): TAuthActions => ({\n        type: AuthActionTypes.FETCH_AUTH_STATUS_REQUEST\n    }),\n\n    fetchAuthStatusSuccess: (user: TUser): TAuthActions => ({\n        type: AuthActionTypes.FETCH_AUTH_STATUS_SUCCESS,\n        payload: user\n    }),\n\n    fetchAuthStatusFail: (error: Error): TAuthActions => ({\n        type: AuthActionTypes.FETCH_AUTH_STATUS_FAIL,\n        error: true,\n        payload: error\n    }),\n\n    authStatusAnauthorized: (): TAuthActions => ({\n        type: AuthActionTypes.AUTH_STATUS_UNAUTHORIZED\n    })\n}\n","import { put, call } from 'redux-saga/effects';\nimport { SagaIterator } from '@redux-saga/core';\n\nimport api from 'api';\nimport { authActions } from 'domains/auth/authActions';\nimport { HttpStatusCodes } from 'mainConstants';\nimport { TFetchAuthRequest } from 'domains/auth/authTypes';\nimport { TUser } from 'types';\n\nexport function* workFetchAuth(action: TFetchAuthRequest): SagaIterator {\n    try {\n        const response: Response = yield call(api.auth.fetchAuth, action.payload);\n\n        if(response.status !== HttpStatusCodes.SUCCESS_STATUS_CODE) {\n            throw new Error(`Can't sign in`);\n        }\n\n        const user: TUser = yield call([response, response.json]);\n\n        yield put(authActions.fetchAuthSuccess(user));\n    } catch(err) {\n        yield put(authActions.fetchAuthFail(err));\n    }\n}\n","import { put, call } from 'redux-saga/effects';\nimport { SagaIterator } from '@redux-saga/core';\n\nimport api from 'api';\nimport { authActions } from 'domains/auth/authActions';\nimport { HttpStatusCodes } from 'mainConstants';\nimport { TUser } from 'types';\n\nexport function* workFetchAuthStatus(): SagaIterator {\n    try {\n        const response: Response = yield call(api.auth.fetchAuthStatus);\n\n        if(response.status === HttpStatusCodes.SUCCESS_STATUS_CODE) {\n            const user: TUser = yield call([response, response.json]);\n\n            yield put(authActions.fetchAuthStatusSuccess(user));\n        } else if (response.status === HttpStatusCodes.UNAUTHORIZED_STATUS_CODE) {\n            yield put(authActions.authStatusAnauthorized());\n        } else {\n            throw new Error(`Can't check auth status`);\n        }\n    } catch (err) {\n        yield put(authActions.fetchAuthStatusFail(err));\n    }\n}\n","import { takeLatest, all, call } from 'redux-saga/effects';\nimport { SagaIterator } from '@redux-saga/core';\n\nimport { AuthActionTypes } from 'domains/auth/authConstants';\nimport { workFetchAuth } from './workerFetchAuth';\nimport { workFetchAuthStatus } from './workerFetchAuthStatus';\n\nfunction* watchFetchAuth(): SagaIterator {\n    yield takeLatest(AuthActionTypes.FETCH_AUTH_REQUEST, workFetchAuth);\n}\n\nfunction* watchFetchAuthStatus(): SagaIterator {\n    yield takeLatest(AuthActionTypes.FETCH_AUTH_STATUS_REQUEST, workFetchAuthStatus);\n}\n\nexport function* watchAuth(): SagaIterator {\n    yield all([call(watchFetchAuth), call(watchFetchAuthStatus )]);\n}\n","import { ReviewsActionTypes } from './reviewsConstants';\nimport { TReviewsActions } from './reviewsTypes';\nimport { TReviews, TUserReview } from 'types';\n\nexport const reviewsActions = {\n    fetchReviewsRequest: (id: number): TReviewsActions => ({\n        type: ReviewsActionTypes.FETCH_REVIEWS_REQUEST,\n        payload: id\n    }),\n\n    fetchReviewsSuccess: (id: number, reviews: TReviews): TReviewsActions => ({\n        type: ReviewsActionTypes.FETCH_REVIEWS_SUCCESS,\n        payload: {\n            id,\n            data: reviews\n        }\n    }),\n\n    fetchReviewsFail: (error: Error): TReviewsActions => ({\n        type: ReviewsActionTypes.FETCH_REVIEWS_FAIL,\n        error: true,\n        payload: error\n    }),\n\n    fetchReviewRequest: (id: number, reviewData: TUserReview): TReviewsActions => ({\n        type: ReviewsActionTypes.FETCH_REVIEW_REQUEST,\n        payload: {\n            id,\n            reviewData\n        }\n    }),\n\n    fetchReviewSuccess: (id: number, reviews: TReviews): TReviewsActions => ({\n        type: ReviewsActionTypes.FETCH_REVIEW_SUCCESS,\n        payload: {\n            id,\n            data: reviews\n        }\n    }),\n\n    fetchReviewFail: (error: Error): TReviewsActions => ({\n        type: ReviewsActionTypes.FETCH_REVIEW_FAIL,\n        error: true,\n        payload: error\n    })\n}\n","import { put, call } from 'redux-saga/effects';\nimport { SagaIterator } from '@redux-saga/core';\n\nimport api from 'api';\nimport { reviewsActions } from 'domains/reviews/reviewsActions';\nimport { TFetchReviewsRequest } from 'domains/reviews/reviewsTypes';\nimport { HttpStatusCodes } from 'mainConstants';\nimport { TReviews } from 'types';\n\nexport function* workFetchReviews(action: TFetchReviewsRequest): SagaIterator {\n    try {\n        const response: Response = yield call(api.reviews.fetchReviews, action.payload);\n\n        if(response.status !== HttpStatusCodes.SUCCESS_STATUS_CODE) {\n            throw new Error(`Can't receive the list of reviews`);\n        }\n\n        const reviews: TReviews = yield call([response, response.json]);\n\n        yield put(reviewsActions.fetchReviewsSuccess(action.payload, reviews));\n    } catch (err) {\n        yield put(reviewsActions.fetchReviewsFail(err));\n    }\n}\n","import { put, call } from 'redux-saga/effects';\nimport { SagaIterator } from '@redux-saga/core';\nimport { push } from 'connected-react-router/immutable';\n\nimport api from 'api';\nimport { reviewsActions } from 'domains/reviews/reviewsActions';\nimport { TFetchReviewRequest } from 'domains/reviews/reviewsTypes';\nimport { HttpStatusCodes } from 'mainConstants';\nimport { TReviews } from 'types';\n\nexport function* workFetchReview(action: TFetchReviewRequest): SagaIterator {\n    try {\n        const { payload: {id, reviewData}} = action;\n        const response: Response = yield call(api.reviews.fetchReview, id, reviewData);\n\n        if(response.status !== HttpStatusCodes.SUCCESS_STATUS_CODE) {\n            throw new Error(`Can't save the review`);\n        }\n\n        const reviews: TReviews = yield call([response, response.json]);\n\n        yield put(reviewsActions.fetchReviewSuccess(id, reviews));\n        yield put(push(`/film/${id}`));\n    } catch (err) {\n        yield put(reviewsActions.fetchReviewFail(err));\n    }\n}\n","import { takeLatest, all, call } from 'redux-saga/effects';\nimport { SagaIterator } from '@redux-saga/core';\n\nimport { ReviewsActionTypes } from 'domains/reviews/reviewsConstants';\nimport { workFetchReviews } from './workerFetchReviews';\nimport { workFetchReview } from './workerFetchReview';\n\nfunction* watchFetchReviews(): SagaIterator {\n    yield takeLatest(ReviewsActionTypes.FETCH_REVIEWS_REQUEST, workFetchReviews);\n}\n\nfunction* watchFetchReview(): SagaIterator {\n    yield takeLatest(ReviewsActionTypes.FETCH_REVIEW_REQUEST, workFetchReview);\n}\n\nexport function* watchReviews(): SagaIterator {\n    yield all([call( watchFetchReviews ), call( watchFetchReview )]);\n}\n","import { FavoritesActionTypes } from './favoritesConstants';\nimport { TFavoritesActions } from './favoritesTypes';\nimport { TFilms } from 'types';\n\nexport const favoritesActions = {\n    fetchFavoritesRequest: (): TFavoritesActions => ({\n        type: FavoritesActionTypes.FETCH_FAVORITES_REQUEST\n    }),\n\n    fetchFavoritesSuccess: (favorites: TFilms): TFavoritesActions => ({\n        type: FavoritesActionTypes.FETCH_FAVORITES_SUCCESS,\n        payload: favorites\n    }),\n\n    fetchFavoritesFail: (error: Error): TFavoritesActions => ({\n        type: FavoritesActionTypes.FETCH_FAVORITES_FAIL,\n        error: true,\n        payload: error\n    }),\n\n    fetchFavoriteRequest: (id: number, status: number): TFavoritesActions => ({\n        type: FavoritesActionTypes.FETCH_FAVORITE_REQUEST,\n        payload: {\n            id,\n            status\n        }\n    }),\n\n    fetchFavoriteSuccess: (favorites: TFilms): TFavoritesActions => ({\n        type: FavoritesActionTypes.FETCH_FAVORITE_SUCCESS,\n        payload: favorites\n    }),\n\n    fetchFavoriteFail: (error: Error): TFavoritesActions => ({\n        type: FavoritesActionTypes.FETCH_FAVORITE_FAIL,\n        error: true,\n        payload: error\n    })\n}\n","import { put, call } from 'redux-saga/effects';\nimport { SagaIterator } from '@redux-saga/core';\n\nimport api from 'api';\nimport { favoritesActions } from 'domains/favorites/favoritesActions';\nimport { HttpStatusCodes } from 'mainConstants';\nimport { TFilms } from 'types';\n\nexport function* workFetchFavorites(): SagaIterator {\n    try {\n        const response: Response = yield call(api.favorites.fetchFavorites);\n\n        if(response.status !== HttpStatusCodes.SUCCESS_STATUS_CODE) {\n            throw new Error(`Can't receive the list of favorite films`);\n        }\n\n        const favorites: TFilms = yield call([response, response.json]);\n\n        yield put(favoritesActions.fetchFavoritesSuccess(favorites));\n    } catch (err) {\n        yield put(favoritesActions.fetchFavoritesFail(err));\n    }\n}\n","import { put, call } from 'redux-saga/effects';\nimport { SagaIterator } from '@redux-saga/core';\n\nimport api from 'api';\nimport { favoritesActions } from 'domains/favorites/favoritesActions';\nimport { TFetchFavoriteRequest } from 'domains/favorites/favoritesTypes';\nimport { HttpStatusCodes } from 'mainConstants';\nimport { TFilms } from 'types';\n\nexport function* workFetchFavorite(action: TFetchFavoriteRequest): SagaIterator {\n    try {\n        const { payload: {id, status}} = action;\n        const response: Response = yield call(api.favorites.fetchFavorite, id, status);\n\n        if(response.status === HttpStatusCodes.SUCCESS_STATUS_CODE) {\n            const favorites: TFilms = yield call([response, response.json]);\n\n            yield put(favoritesActions.fetchFavoriteSuccess(favorites));\n            yield put(favoritesActions.fetchFavoritesRequest());\n        } else if (response.status === HttpStatusCodes.UNAUTHORIZED_STATUS_CODE) {\n            throw new Error(`You're unauthorized. Please, sign in and retry`);\n        } else {\n            throw new Error(`Can't save the film to the favorites list. Please, retry later`);\n        }     \n    } catch(err) {\n        yield put(favoritesActions.fetchFavoriteFail(err));\n    }\n}\n","import { takeLatest, all, call } from 'redux-saga/effects';\nimport { SagaIterator } from '@redux-saga/core';\n\nimport { FavoritesActionTypes } from 'domains/favorites/favoritesConstants';\nimport { workFetchFavorites } from './workerFetchFavorites';\nimport { workFetchFavorite } from './workerFetchFavorite';\n\nfunction* watchFetchFavorites(): SagaIterator {\n    yield takeLatest(FavoritesActionTypes.FETCH_FAVORITES_REQUEST, workFetchFavorites);\n}\n\nfunction* watchFetchFavorite(): SagaIterator {\n    yield takeLatest(FavoritesActionTypes.FETCH_FAVORITE_REQUEST, workFetchFavorite);\n}\n\nexport function* watchFavorites(): SagaIterator {\n    yield all([call( watchFetchFavorites ), call( watchFetchFavorite )]);\n}\n","import { all, call } from 'redux-saga/effects';\nimport { SagaIterator } from '@redux-saga/core';\n\nimport { watchPromo } from 'domains/promo/saga/promoWatchers';\nimport { watchFilms } from 'domains/films/saga/filmsWatchers';\nimport { watchAuth } from 'domains/auth/saga/authWatchers';\nimport { watchReviews } from 'domains/reviews/saga/reviewsWatchers';\nimport { watchFavorites } from 'domains/favorites/saga/favoritesWatchers';\n\nexport function* rootSaga(): SagaIterator {\n    yield all([call( watchPromo ), call( watchFilms ), call( watchAuth ), call( watchReviews ),\n        call( watchFavorites )\n    ]);\n}\n","import { createStore, applyMiddleware } from 'redux';\nimport { createLogger } from 'redux-logger';\nimport { composeWithDevTools } from 'redux-devtools-extension/developmentOnly';\nimport { routerMiddleware as createRouterMiddleware } from 'connected-react-router/immutable';\nimport createSagaMiddleware from 'redux-saga';\nimport { persistStore } from 'redux-persist';\n\nimport { persistedRootReducer, history } from './rootReducer';\nimport { rootSaga } from './rootSaga'; \n\nconst routerMiddleware = createRouterMiddleware(history);\nconst sagaMiddleware = createSagaMiddleware();\nconst middlewares = [sagaMiddleware, routerMiddleware];\n\nconst logger = createLogger({\n    duration: true,\n    collapsed: true,\n    colors: {\n        title: (action) => (action.error) ? `firebrick` : `deepskyblue`,\n        prevState: () => `#1C5FAF`,\n        action:    () => `#149945`,\n        nextState: () => `#A47104`,\n        error:     () => `#ff0005`\n    }\n});\n\nif(process.env.NODE_ENV !== `production`) {\n    middlewares.push(logger);\n}\n\nconst store = createStore(persistedRootReducer, composeWithDevTools(applyMiddleware(...middlewares)));\nconst persistedStore = persistStore(store);\n\nsagaMiddleware.run(rootSaga);\n\nexport { persistedStore, store };\n","import { useEffect, useState } from 'react';\n\nimport { isRefInitialized } from 'utils';\n\nlet interval: number;\n\nexport const useVideoPlayerProgress = (ref: unknown) => {\n    const [progress, setProgress] = useState(0);\n\n    useEffect(() => {\n        if(isRefInitialized(ref) && ref) {\n            interval = setInterval(() => {\n                setProgress(ref.current.currentTime / ref.current.duration * 100);\n            }, 1000);\n        }\n\n        return () => clearInterval(interval);\n    }, [ref]);\n    \n    return isFinite(progress)\n        ? progress\n        : 0;\n}\n","import { TState } from 'types';\n\nexport const getUser = (state: TState) => state.auth.get(`user`);\n\nexport const getAuthError = (state: TState) => state.auth.get(`authError`);\n\nexport const getIsAuthFetching = (state: TState) => state.auth.get(`isAuthFetching`);\n\nexport const getAuthStatusError = (state: TState) => state.auth.get(`authStatusError`);\n\nexport const getIsAuthStatusFetching = (state: TState) => state.auth.get(`isAuthStatusFetching`);\n","import { TState } from 'types';\n\nexport const getIsPromoFetching = (state: TState) => state.promo.get(`isPromoFetching`);\n\nexport const getPromoError = (state: TState) => state.promo.get(`promoError`);\n\nexport const getPromo = (state: TState) => state.promo.get(`promo`);\n","import { useCallback } from 'react';\nimport { push } from 'connected-react-router/immutable';\nimport { useDispatch } from 'react-redux';\nimport { useLocation } from 'react-router-dom';\n\nimport { Routes } from 'mainConstants';\n\nexport const useLogoLinkClick = () => {\n    const {pathname} = useLocation();\n\n    const isMain = pathname === Routes.MAIN_PAGE;\n    const dispatch = useDispatch();\n\n    const logoLinkClickHandler = useCallback((): void => {\n        if(!isMain) {\n            dispatch(push(Routes.MAIN_PAGE));\n        }\n    }, [isMain, dispatch]);\n\n    return logoLinkClickHandler;\n}\n","import React, { FC } from 'react';\nimport cn from 'classnames';\n\ntype TLogoProps = {\n    isMainPage: boolean;\n    logoLinkClickHandler: () => void;\n    isFooter?: boolean;\n}\n\nexport const Logo: FC<TLogoProps> = ({isMainPage, logoLinkClickHandler, isFooter}) => {\n    const logoLinkStyle = (isMainPage)\n        ? {}\n        : {cursor: `pointer`};\n\n    const logoLinkClass = cn(`logo__link`, {\n        'logo__link--light': isFooter\n    });\n\n    return (\n        <div className=\"logo\">\n            <a className={logoLinkClass} onClick={logoLinkClickHandler} style={logoLinkStyle}\n                title={(isMainPage) ? `` : `To the main page`}\n            >\n                <span className=\"logo__letter logo__letter--1\">W</span>\n                <span className=\"logo__letter logo__letter--2\">T</span>\n                <span className=\"logo__letter logo__letter--3\">W</span>\n            </a>\n        </div>\n    );\n}\n","import { useCallback } from 'react';\nimport { push } from 'connected-react-router/immutable';\nimport { useDispatch } from 'react-redux';\n\nexport const useFilmsPagePush = (id?: number) => {\n    const dispatch = useDispatch();\n\n    const pushToFilmPage = useCallback(() => {\n        dispatch(push(`/film/${id}`));\n    }, [dispatch, id]);\n\n    return pushToFilmPage;\n}\n","import React, { FC, ReactElement, useCallback } from 'react';\nimport cn from 'classnames';\nimport { Map } from 'immutable';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useLocation } from 'react-router-dom';\nimport { push } from 'connected-react-router/immutable';\n\nimport * as authSelectors from 'domains/auth/authSelectors';\nimport * as promoSelectors from 'domains/promo/promoSelectors';\nimport { useLogoLinkClick } from 'hooks/useLogoLinkClick';\nimport { useSignInLinkClick } from 'hooks/useSignInLinkClick';\nimport { Routes } from 'mainConstants';\nimport { Logo } from 'components/logo/Logo';\nimport { useFilmsPagePush } from 'hooks/useFilmsPagePush';\n\ntype THeaderProps = {\n    film?: Map<string, any>;\n}\n\nexport const Header: FC<THeaderProps> = ({film}) => {\n    const user = useSelector(authSelectors.getUser);\n    const promo = useSelector(promoSelectors.getPromo);\n    const authStatusError = useSelector(authSelectors.getAuthStatusError);\n    const isAuthStatusFetching = useSelector(authSelectors.getIsAuthStatusFetching);\n\n    let backgroundImage: string;\n    let name: string;\n    let posterImage: string | undefined;\n    let id: number | undefined;\n\n    const dispatch = useDispatch();\n    \n    if(film) {\n        backgroundImage = (film as Map<string, any>).get(`background_image`);\n        name = (film as Map<string, any>).get(`name`);\n        posterImage = (film as Map<string, any>).get(`poster_image`);\n        id = (film as Map<string, any>).get(`id`);\n    } else {\n        backgroundImage = (promo as Map<string, any>).get(`background_image`);\n        name = (promo as Map<string, any>).get(`name`);\n    }\n\n    const {pathname} = useLocation();\n    const isFilmPage = pathname.includes(`film`) && !pathname.includes(`review`);\n    const isMainPage = pathname === Routes.MAIN_PAGE;\n    const isReviewPage = pathname.includes(`review`);\n    const isFavoritesPage = pathname === Routes.FAVORITES_PAGE;\n\n    const logoLinkClickHandler = useLogoLinkClick();\n    const {signInLinkClickHandler, isLoginPage} = useSignInLinkClick();\n    const navLinkClickHandler = useFilmsPagePush(id);\n\n    const avatarImgClickHandler = useCallback(() => {\n        if (!isFavoritesPage) {\n            dispatch(push(Routes.FAVORITES_PAGE));\n        }\n    }, [dispatch, isFavoritesPage]);\n\n    let avatar: string;\n    let userBlockJSX: ReactElement = (\n        <div className=\"user-block\">\n            <a className=\"user-block__link\" onClick={signInLinkClickHandler} title=\"To the login page\">\n                Sign in\n            </a>\n        </div>\n    );\n\n    if(isAuthStatusFetching) {\n        userBlockJSX = <div className=\"user-block\">Authorization...</div>;\n    } else if(authStatusError) {\n        userBlockJSX = <div className=\"user-block\">Authorization failed</div>;\n    } else if(user) {\n        avatar = (user as Map<string,any>).get(`avatar_url`);\n\n        const avatarImgStyle = (isFavoritesPage)\n            ? {cursor: `default`}\n            : {};\n\n        userBlockJSX = (\n            <div className=\"user-block\">\n                <div className=\"user-block__avatar\">\n                    <img src={`https://htmlacademy-react-3.appspot.com/${avatar}`} onClick={avatarImgClickHandler}\n                        height=\"63\" alt=\"User avatar\" width=\"63\" title={(isFavoritesPage) ? `` : `To the favorites page`}\n                        style={avatarImgStyle}\n                    />\n                </div>\n            </div>\n        );\n    }\n    \n    const headerClass = cn(`page-header`, {\n        'user-page__head': isLoginPage || isFavoritesPage,\n        'movie-card__head': isFilmPage\n    });\n\n    return (\n        <>\n            {(!isLoginPage && !isFavoritesPage) &&\n                <div className=\"movie-card__bg\">\n                    <img src={backgroundImage} alt={name} />\n                </div>\n            }\n            <h1 className=\"visually-hidden\">WTW</h1>\n            <header className={headerClass}>\n                <Logo isMainPage={isMainPage} logoLinkClickHandler={logoLinkClickHandler} />\n                {(isReviewPage) &&\n                    <nav className=\"breadcrumbs\">\n                        <ul className=\"breadcrumbs__list\">\n                            <li className=\"breadcrumbs__item\">\n                                <a className=\"breadcrumbs__link breadcrumbs__link--active\" onClick={navLinkClickHandler}\n                                    title=\"To the film page\"\n                                >\n                                    {name}\n                                </a>\n                            </li>\n                            <li className=\"breadcrumbs__item\">\n                                <a className=\"breadcrumbs__link\">Add review</a>\n                            </li>\n                        </ul>\n                    </nav>\n                }\n                {(isLoginPage || isFavoritesPage) &&\n                    <h1 className=\"page-title  user-page__title\">{(isLoginPage) ? `Sign in` : `My list`}</h1>\n                }\n                {(!isLoginPage) && userBlockJSX}\n            </header>\n            {(isReviewPage) &&\n                <div className=\"movie-card__poster movie-card__poster--small\">\n                    <img src={posterImage} alt={name} width=\"218\" height=\"327\" />\n                </div>\n            }\n        </>\n    );\n}\n","import { useCallback } from 'react';\nimport { push } from 'connected-react-router/immutable';\nimport { useDispatch } from 'react-redux';\nimport { useLocation } from 'react-router-dom';\n\nimport { Routes } from 'mainConstants';\n\nexport const useSignInLinkClick = () => {\n    const { pathname } = useLocation();\n\n    const isLoginPage = pathname === Routes.LOGIN_PAGE;\n    const dispatch = useDispatch();\n\n    const signInLinkClickHandler = useCallback((): void => {\n        if (!isLoginPage) {\n            dispatch(push(Routes.LOGIN_PAGE));\n        }\n    }, [isLoginPage, dispatch]);\n\n    return {\n        signInLinkClickHandler,\n        isLoginPage\n    };\n}\n","import { MutableRefObject } from 'react';\nimport moment from 'moment';\nimport { List, Map, Set } from 'immutable';\n\nexport const getTimeFromMins = (mins: number | undefined): string => {\n    const h = (mins) ? mins / 60 | 0 : 0;\n    const m = (mins) ? mins % 60 | 0 : 0;\n\n    return moment.utc().hours(h).minutes(m).seconds(0).format(\"h:mm:ss\");\n}\n\nexport const isRefInitialized = (ref: unknown): ref is MutableRefObject<HTMLVideoElement> => {\n    return (ref as MutableRefObject<HTMLVideoElement>).current !== null;\n}\n\nexport const isFilms = (films: unknown): films is List<Map<string, any>> => {\n    return (films as List<Map<string, any>>).size !== 0;\n}\n\nexport const isPromo = (promo: unknown): promo is Map<string, any> => {\n    return (promo as Map<string, any>).size !== 0;\n}\n\nexport const isReviews = (reviews: unknown): reviews is List<Map<string, any>> => {\n    return (reviews as List<Map<string, any>>).size !== 0;\n}\n\nexport const isGenres = (genres: Set<any> | undefined): genres is Set<string> => {\n    return genres !== void 0;\n}\n\nexport const mapMonthToNubmer = (number: number) => {\n    const MONTHS: string[] = [`January`, `February`, `March`, `April`, `May`, `June`, `July`, `August`, `September`,\n        `October`, `November`, `December`];\n\n    return MONTHS[number];\n}\n\nexport const mapRatingToMark = (rating: number): string => {\n    switch(Math.floor(rating)) {\n        case 10:\n            return `Awesome`;\n\n        case 9:\n        case 8:\n            return `Very good`;\n\n        case 7:\n        case 6:\n        case 5:\n            return `Good`;\n\n        case 4:\n        case 3:\n            return `Normal`;\n\n        case 2:\n        case 1:\n        case 0:\n            return `Bad`;\n    }\n\n    return `User's mark`;\n}\n","import React, { FC, Children } from 'react';\r\nimport styled, { keyframes } from 'styled-components';\r\n\r\ntype TPetalProps = {\r\n    rotate: string;\r\n    delay: string;\r\n};\r\n\r\nconst rotation = keyframes`\r\n    0% {\r\n        opacity: 1\r\n    }\r\n\r\n    100% {\r\n        opacity: 0\r\n    }\r\n`;\r\n\r\nconst SpinnerWrapper = styled.div`\r\n    width: 327px;\r\n    height: 327px;\r\n    display: block;\r\n    overflow: hidden;\r\n    background: transparent;\r\n    margin: 0 auto;\r\n    position: relative;\r\n    transform: translateZ(0) scale(1);\r\n    backface-visibility: hidden;\r\n    transform-origin: 0 0;\r\n`;\r\n\r\nconst Petal = styled.div<TPetalProps>`\r\n    left: 153px;\r\n    top: 78px;\r\n    position: absolute;\r\n    animation: ${rotation} linear 1s infinite;\r\n    background: #831a19;\r\n    width: 19px;\r\n    height: 39px;\r\n    border-radius: 9px / 19px;\r\n    transform-origin: 9px 85px;\r\n    box-sizing: content-box;\r\n    transform: ${({rotate}) => rotate};\r\n    animation-delay: ${({delay}) => delay};\r\n`;\r\n\r\nconst transformDegs: number[] = [0, 30, 60, 90, 120, 150, 180, 210, 240, 270, 300, 330];\r\nconst animationDelays: number[] = [-0.9166666666666666, -0.8333333333333334, -0.75, -0.6666666666666666,\r\n    -0.583333333333333, -0.5, -0.4166666666666667, -0.3333333333333333, -0.25, -0.16666666666666666,\r\n    -0.08333333333333333, 0\r\n];\r\n\r\nexport const Spinner: FC = () => (\r\n    <SpinnerWrapper>   \r\n        {\r\n            Children.toArray(new Array(12).fill(``).map((_, idx) => (\r\n                <Petal rotate={`rotate(${transformDegs[idx]}deg)`}\r\n                    delay={`${animationDelays[idx]}s`}\r\n                />\r\n            )))\r\n        }\r\n    </SpinnerWrapper>\r\n);\r\n","import React, { FC, memo, forwardRef, useMemo } from 'react';\n\nimport { getTimeFromMins, isRefInitialized } from 'utils';\nimport { useVideoPlayerProgress } from 'hooks/useVideoPlayerProgress';\nimport { useActiveVideoPlayer } from 'hooks/useActiveVideoPlayer';\nimport { Spinner } from 'components/spinner/Spinner';\n\ntype TVideoPlayerProps = {\n    src: string | undefined;\n    posterImage: string | undefined;\n    runTime: number | undefined;\n    ref: React.RefObject<HTMLVideoElement>;\n    isPlaying: boolean;\n    handleExitBtnClick: () => void;\n    isVideoLoading: boolean;\n    onCanPlayThroughHandler: () => void;\n}\n\nexport const VideoPlayer: FC<TVideoPlayerProps> = memo(forwardRef((props, ref) => {\n    const { handleExitBtnClick, src, posterImage, runTime, isPlaying, isVideoLoading,\n        onCanPlayThroughHandler} = props;\n\n    const progress = useVideoPlayerProgress(ref);\n    const {isActive, playPauseBtnHandler, exitBtnClickHandler} =\n        useActiveVideoPlayer(isPlaying, ref, handleExitBtnClick);\n\n    const playerStyle = (isPlaying)\n        ? {}\n        : {display: `none`};\n\n    const fullScreenBtnClickHandler = () => {\n        if(isRefInitialized(ref)) {\n            ref.current.requestFullscreen();\n        }\n    }    \n\n    const restTimeFormatted = useMemo(() => {\n        const restTime = (runTime as number) * (100 - progress);\n\n        return getTimeFromMins(restTime);\n    }, [runTime, progress]);\n\n    if(isVideoLoading) {\n        return (\n            <div className=\"player\" style={playerStyle}>\n                <Spinner />\n                <video className=\"player__video\" src={src} ref={ref} onCanPlayThrough={onCanPlayThroughHandler} />\n            </div>\n        );\n    }\n\n    return (     \n        <div className=\"player\" style={playerStyle}>\n            <video className=\"player__video\" src={src} poster={posterImage} ref={ref} />\n            <button type=\"button\" className=\"player__exit\" onClick={exitBtnClickHandler} title=\"Exit\">\n                Exit\n            </button>\n            <div className=\"player__controls\">\n                <div className=\"player__controls-row\">\n                    <div className=\"player__time\">\n                        <progress className=\"player__progress\" value={progress} max=\"100\" />\n                        <div className=\"player__toggler\" style={{ left: `${progress}%` }}>\n                            Toggler\n                        </div>\n                    </div>\n                    <div className=\"player__time-value\">{restTimeFormatted}</div>\n                </div>\n                <div className=\"player__controls-row\">\n                    <button type=\"button\" className=\"player__play\" onClick={playPauseBtnHandler}\n                        title={(isActive) ? `Pause` : `Play`}\n                    >\n                        <svg viewBox={(isActive) ? `0 0 14 21` : `0 0 320.001 320.001`} width=\"14\" height=\"21\">\n                            <use xlinkHref={(isActive) ? `#pause` : \"#play\"}></use>\n                        </svg>\n                        <span>{(isActive) ? `Pause` : `Play`}</span>\n                    </button>\n                    <div className=\"player__name\">Transpotting</div>\n                    <button type=\"button\" className=\"player__full-screen\" onClick={fullScreenBtnClickHandler}\n                        title=\"Full screen\"\n                    >\n                        <svg viewBox=\"0 0 27 27\" width=\"27\" height=\"27\">\n                            <use xlinkHref=\"#full-screen\"></use>\n                        </svg>\n                        <span>Full screen</span>\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n}));\n","import { useState, useCallback, useEffect } from 'react';\n\nimport { isRefInitialized } from 'utils';\n\nexport const useActiveVideoPlayer = (isPlaying: boolean, ref: unknown, handleExitBtnClick: () => void) => {\n    const [isActive, setIsActive] = useState(false);\n\n    useEffect(() => {\n        setIsActive(isPlaying);\n    }, [isPlaying]);\n\n    const playPauseBtnHandler = useCallback(() => {\n        if(isRefInitialized(ref)) {\n            if(isActive) {\n                ref.current.pause();\n            } else {\n                ref.current.play();\n            }\n        }\n\n        setIsActive((isActive) => !isActive);\n    }, [isActive, ref]);\n\n    const exitBtnClickHandler = useCallback(() => {\n        if(isRefInitialized(ref)) {\n            handleExitBtnClick();\n            ref.current.currentTime = 0;\n            \n            if(isActive) {\n                ref.current.pause();\n            }\n        }\n    }, [handleExitBtnClick, ref, isActive]);\n\n    return {\n        isActive,\n        playPauseBtnHandler,\n        exitBtnClickHandler\n    };\n} \n","import { useState, useCallback, useRef } from 'react';\n\nexport const usePlayingVideo = () => {\n    const [isPlaying, setIsPlaying] = useState(false);\n    const [isVideoLoading, setIsVideoLoading] = useState(true);\n\n    const videoRef = useRef<HTMLVideoElement>(null);\n\n    const playBtnClickHandler = useCallback(() => {\n        if(videoRef && videoRef.current) {\n            videoRef.current.play();\n            setIsPlaying(true);\n            document.body.style.overflow = `hidden`;       \n        }\n    }, []);\n\n    const handleExitBtnClick = useCallback(() => {\n        setIsPlaying(false);\n        document.body.style.overflow = `visible`; \n    }, []);\n\n    const onCanPlayThroughHandler = useCallback(() => {\n        setIsVideoLoading(false);        \n    }, []);\n\n    return {\n        videoRef,\n        isPlaying,\n        handleExitBtnClick,\n        playBtnClickHandler,\n        isVideoLoading,\n        onCanPlayThroughHandler\n    };\n}\n","import { createSelector } from 'reselect';\n\nimport { isFilms } from 'utils';\nimport { TState } from 'types';\n\nexport const getIsFavoritesFetching = (state: TState) => state.favorites.get(`isFavoritesFetching`);\n\nexport const getFavoritesError = (state: TState) => state.favorites.get(`favoritesError`);\n\nexport const getFavorites = (state: TState) => state.favorites.get(`favorites`);\n\nexport const getIsFavoriteFetching = (state: TState) => state.favorites.get(`isFavoriteFetching`);\n\nexport const getFavoriteError = (state: TState) => state.favorites.get(`favoriteError`);\n\nexport const selectIsFavoriteFactory = (favoriteId: number) => createSelector( getFavorites, (favorites) => {\n    if(isFilms(favorites)) {        \n        return favorites.find((favorite) => favorite.get(`id`) === favoriteId);\n    }\n    \n    return false;\n});\n","import { createSelector } from 'reselect';\nimport { Map, Set } from 'immutable';\n\nimport { TState } from 'types';\nimport { isFilms } from 'utils';\n\nexport const getIsFilmsFetching = (state: TState) => state.films.get(`isFilmsFetching`);\n\nexport const getFilmsError = (state: TState) => state.films.get(`filmsError`);\n\nexport const getFilms = (state: TState) => state.films.get(`films`);\n\nexport const selectGenres = createSelector(getFilms, (films) => {    \n    if(isFilms(films)) {\n        const genres = films.map((film) => film.get(`genre`))\n                            .toSet()\n                            .slice(0, 9)\n                            .sort();\n\n        return Set([`All genres`]).concat(genres);\n    }\n});\n\nexport const getFilter = (state: TState) => state.films.get(`filter`);\n\nexport const getFilm = (state: TState) => state.films.get(`film`);\n\nexport const selectFilmsByGenre = createSelector(getFilms, getFilter, (films, filter) => {\n    if(isFilms(films)) {\n        return (filter === `All genres`)\n            ? films\n            : films.filter((film) => film.get(`genre`) === filter);\n    }\n});\n\nexport const selectSimilarFilmsFactory = (film: Map<string, any>) => createSelector(getFilms, (films) => {\n    if(isFilms(films)) {\n        return films.filter((el) => el.get(`genre`) === film.get(`genre`) && el !== film)\n                    .slice(0, 4);\n    }\n});\n","import { useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Map } from 'immutable';\n\nimport { favoritesActions } from 'domains/favorites/favoritesActions';\nimport * as favoritesSelectors from 'domains/favorites/favoritesSelectors';\nimport * as filmsSelectors from 'domains/films/filmsSelectors';\nimport { isFilms } from 'utils';\n\nexport const useFetchFavorite = (favorite: number | Map<string, any>) => {\n    const dispatch = useDispatch();\n    const films = useSelector(filmsSelectors.getFilms);\n    let favoriteId: number | undefined;\n\n    if(typeof favorite === `number`) {\n        favoriteId = favorite;\n    } else if(isFilms(films)) {      \n        const promoInFilms = films.find((film) => film.get(`name`) === favorite.get(`name`));\n\n        favoriteId = (promoInFilms as Map<string, any>).get(`id`);\n    }  \n\n    const isFavorite = useSelector(favoritesSelectors.selectIsFavoriteFactory(favoriteId as number));\n    const status = (isFavorite)\n        ? 0\n        : 1;\n\n    const myListBtnClickHandler = useCallback((): void => {        \n        dispatch(favoritesActions.fetchFavoriteRequest(favoriteId as number, status));\n    }, [dispatch, status, favoriteId]);\n\n    const favoriteError = useSelector(favoritesSelectors.getFavoriteError);\n    const isFavoriteFetching = useSelector(favoritesSelectors.getIsFavoriteFetching);\n\n    return {\n        isFavoriteFetching,\n        favoriteError,\n        myListBtnClickHandler,\n        isFavorite\n    };\n}\n","import React, { FC, memo } from 'react';\nimport styled from 'styled-components';\n\ntype TNotificationProps = {\n    children: string;\n}\n\nconst NotificationWrapper = styled.div`\n    position: fixed;\n    right: 0;\n    bottom: 0;\n    min-height: 50px;\n    width: 300px;\n    outline: 1px solid red;\n    padding: 10px 20px;\n    background-color: black;\n`;\n\nexport const Notification: FC<TNotificationProps> = memo(({ children }) => {\n    return (\n        <NotificationWrapper>\n            {children}\n        </NotificationWrapper>\n    );\n});\n","import React, { FC, memo, useCallback } from 'react';\nimport { push } from 'connected-react-router/immutable';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport { Map } from 'immutable';\n\nimport { useFetchFavorite } from 'hooks/useFetchFavorite';\nimport * as promoSelectors from 'domains/promo/promoSelectors';\nimport { isPromo } from 'utils';\nimport { Notification } from 'components/notification/Notification';\n\ntype TFilmButtonsProps = {\n    playBtnClickHandler: () => void;\n    detailed?: boolean;\n}\n\nexport const FilmButtons: FC<TFilmButtonsProps> = memo(({playBtnClickHandler, detailed}) => {\n    const {id} = useParams();\n    const dispatch = useDispatch();\n    const promo = useSelector(promoSelectors.getPromo);\n    \n    const addReviewBtnClickHandler = useCallback(() => {\n        dispatch(push(`/film/${id}/review`));\n    }, [dispatch, id]);\n\n    let favorite: number | Map<string, any>;\n\n    if(!id && isPromo(promo)) {\n        favorite = promo;\n    } else {\n        favorite = +id;\n    }\n\n    const {myListBtnClickHandler, isFavorite, isFavoriteFetching, favoriteError} = useFetchFavorite(favorite);    \n\n    return (\n        <>\n            <button className=\"btn btn--play movie-card__button\" type=\"button\" title=\"Play\"\n                onClick={playBtnClickHandler}\n            >\n                <svg viewBox=\"0 0 19 19\" width=\"19\" height=\"19\">\n                    <use xlinkHref=\"#play\"></use>\n                </svg>\n                <span>Play</span>\n            </button>\n            <button className=\"btn btn--list movie-card__button\" type=\"button\" title=\"My list\"\n                onClick={myListBtnClickHandler}\n            >\n                <svg viewBox=\"0 0 19 20\" width=\"19\" height=\"20\">\n                    <use xlinkHref={(isFavorite) ? `#in-list` : `#add`}></use>\n                </svg>\n                <span>My list</span>\n            </button>\n            {(detailed) &&\n                <a className=\"btn btn--add-review movie-card__button\" title=\"Add review\"\n                    onClick={addReviewBtnClickHandler}\n                >\n                    Add review\n                </a> \n            }\n            {(isFavoriteFetching || favoriteError) &&\n                <Notification>\n                    {(isFavoriteFetching)\n                        ? `Saving to the favorites list... Please, wait`\n                        : (favoriteError as Error).message\n                    }\n                </Notification>\n            }\n        </>\n    );\n});\n","import React, { FC, memo } from 'react';\nimport { Map } from 'immutable';\n\nimport { VideoPlayer } from 'components/videoPlayer/VideoPlayer';\nimport { usePlayingVideo } from 'hooks/usePlayingVideo';\nimport { FilmButtons } from 'components/filmButtons/FilmButtons';\n\ntype TPromoProps = {\n    promo: Map<string, any>;\n}\n\nexport const Promo: FC<TPromoProps> = memo(({ promo }) => {\n    const {isPlaying, handleExitBtnClick, playBtnClickHandler, videoRef, isVideoLoading,\n        onCanPlayThroughHandler} = usePlayingVideo();\n    const name: string = promo.get(`name`);\n\n    return (\n        <div className=\"movie-card__wrap\">\n            <div className=\"movie-card__info\">\n                <div className=\"movie-card__poster\">\n                    <img src={promo.get(`preview_image`)} alt={`${name} poster`} width=\"218\" height=\"327\" />\n                </div>\n                <div className=\"movie-card__desc\">\n                    <h2 className=\"movie-card__title\">{name}</h2>\n                    <p className=\"movie-card__meta\">\n                        <span className=\"movie-card__genre\">{promo.get(`genre`)}</span>\n                        <span className=\"movie-card__year\">{promo.get(`released`)}</span>\n                    </p>\n                    <div className=\"movie-card__buttons\">\n                        {<FilmButtons playBtnClickHandler={playBtnClickHandler} />}\n                    </div>\n                </div>\n                <VideoPlayer src={promo.get(`video_link`)} posterImage={promo.get(`poster_image`)}\n                    runTime={promo.get(`run_time`)} ref={videoRef} isPlaying={isPlaying}\n                    handleExitBtnClick={handleExitBtnClick} isVideoLoading={isVideoLoading}\n                    onCanPlayThroughHandler={onCanPlayThroughHandler}\n                />\n            </div>\n        </div>\n    );\n});\n","import React, { FC } from 'react';\nimport { Map } from 'immutable';\n\nimport { Promo } from 'components/promo/Promo';\nimport { Spinner } from 'components/spinner/Spinner';\nimport { useFetchPromo } from 'hooks/useFetchPromo';\n\nexport const PromoContainer: FC = () => {\n    const {isPromoFetching, promoError, promo} = useFetchPromo();\n    const verifiedPromo = promo as Map<string, any>;\n\n    if(isPromoFetching) {\n        return <Spinner />;\n    }\n\n    if(promoError) {\n        return <div>error</div>;\n    }\n\n    return <Promo promo={verifiedPromo} />;\n}\n","import { useEffect} from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport * as promoSelectors from 'domains/promo/promoSelectors';\nimport { promoActions } from 'domains/promo/promoActions';\n\nexport const useFetchPromo = () => {\n    const dispatch = useDispatch();\n    const promo = useSelector(promoSelectors.getPromo);\n\n    useEffect(() => {\n        dispatch(promoActions.fetchPromoRequest());\n    }, [dispatch]);\n\n    const isPromoFetching = useSelector(promoSelectors.getIsPromoFetching);\n    const promoError = useSelector(promoSelectors.getPromoError);\n\n    return {\n        isPromoFetching,\n        promoError,\n        promo\n    };\n}\n","import { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { filmsActions } from 'domains/films/filmsActions';\nimport * as filmsSelectors from 'domains/films/filmsSelectors';\n\nexport const useFetchFilms = () => {\n    const dispatch = useDispatch();\n    const films = useSelector(filmsSelectors.getFilms);\n\n    useEffect(() => {\n        dispatch(filmsActions.fetchFilmsRequest());\n    }, [dispatch]);\n\n    const filmsError = useSelector(filmsSelectors.getFilmsError);\n    const isFilmsFetching = useSelector(filmsSelectors.getIsFilmsFetching);\n\n    return {\n        isFilmsFetching,\n        filmsError,\n        films\n    };\n}\n","import React, { FC, memo } from 'react';\nimport { Map } from 'immutable';\n\nimport { useFilmsPagePush } from 'hooks/useFilmsPagePush';\n\ntype TFilmProps = {\n    film: Map<string, any>;\n}\n\nexport const Film: FC<TFilmProps> = memo(({ film }) => {\n    const name: string = film.get(`name`);\n    const id: number = film.get(`id`);\n\n    const filmDivClickHandler = useFilmsPagePush(id);\n\n    return (\n        <article className=\"small-movie-card catalog__movies-card\" title={name}>\n            <div className=\"small-movie-card__image\" onClick={filmDivClickHandler}>\n                <img src={film.get(`preview_image`)} alt={name} width=\"280\" height=\"175\" />\n            </div>\n            <h3 className=\"small-movie-card__title\">\n                <a className=\"small-movie-card__link\">\n                    {name}\n                </a>\n            </h3>\n        </article>\n    );\n});\n","import React, { FC } from 'react';\nimport { List, Map } from 'immutable';\n\nimport { Film } from 'components/film/Film';\n\ntype TFilmsListProps = {\n    films: List<Map<string, any>> | undefined\n}\n\nexport const FilmsList: FC<TFilmsListProps> = React.memo(({ films }) => {\n    const filmsJSX: List<JSX.Element> =\n        (films as List<Map<string, any>>).map((film) => <Film key={film.get(`id`)} film={film} />);\n\n    return (\n        <div className=\"catalog__movies-list\">\n            {filmsJSX}\n        </div>\n    );\n});\n","import React, { FC, useCallback } from 'react';\nimport { useSelector } from 'react-redux';\nimport { List, Map } from 'immutable';\n\nimport { useFetchFilms } from 'hooks/useFetchFilms';\nimport { Spinner } from 'components/spinner/Spinner';\nimport { FilmsList } from 'components/filmsList/FilmsList';\nimport * as filmsSelectors from 'domains/films/filmsSelectors';\nimport { useFilmsListBatch } from 'hooks/useFilmsListBatch';\nimport { isFilms } from 'utils';\n\nexport const FilmsListContainer: FC = () => {\n    const {isFilmsFetching, filmsError, films} = useFetchFilms();\n    const {batch, requestNextBatch} = useFilmsListBatch();\n\n    const filteredFilms = useSelector(filmsSelectors.selectFilmsByGenre);\n    const showMoreBtnClickHandler = useCallback(requestNextBatch, []);\n    let batchedFilms;\n    let hasMoreFilms;\n\n    if(isFilms(films)) {\n        batchedFilms = (filteredFilms as List<Map<string, any>>).slice(0, batch);\n        hasMoreFilms = batchedFilms.size < (filteredFilms as List<Map<string, any>>).size;\n    }\n\n    if(isFilmsFetching) {\n        return <Spinner />;\n    }\n\n    if(filmsError) {\n        return <div>Error</div>;\n    }\n\n    return (\n        <>\n            <FilmsList films={ batchedFilms } />\n            <div className=\"catalog__more\">\n                {(hasMoreFilms) &&\n                    <button className=\"catalog__button\" type=\"button\" onClick={showMoreBtnClickHandler}\n                        title=\"Show more\"\n                    >\n                        Show more\n                    </button>\n                }\n            </div>\n        </>\n    );\n}\n","import { useState } from 'react';\n\nexport const useFilmsListBatch = () => {\n    const [batch, setBatch] = useState(20);\n\n    const requestNextBatch = () => setBatch((batch) => batch + 20);\n\n    return {\n        batch,\n        requestNextBatch\n    };\n};\n","import React, { FC } from 'react';\nimport { useSelector } from 'react-redux';\nimport cn from 'classnames';\nimport { Set } from 'immutable'\n\nimport * as filmsSelectors from 'domains/films/filmsSelectors';\nimport { isGenres } from 'utils';\nimport { useGenreFilter } from 'hooks/useGenreFilter';\n\nexport const GenreFilter: FC = () => {\n    const genres = useSelector(filmsSelectors.selectGenres);\n    const filmsError = useSelector(filmsSelectors.getFilmsError);\n    const isFilmsFetching = useSelector(filmsSelectors.getIsFilmsFetching);\n\n    const {filter, genreItemClickHander} = useGenreFilter();\n\n    if(filmsError || isFilmsFetching) {\n        return null;\n    }\n\n    let genresJSX: undefined | Set<JSX.Element>;\n    \n    if(isGenres(genres)) {\n        genresJSX = genres.map((genre) => {\n            const isCurrentGenre = genre === filter;\n            const genreClass = cn(`catalog__genres-item`, {\n                'catalog__genres-item--active': isCurrentGenre\n            });\n\n            const genreLinkStyle = (isCurrentGenre)\n                ? {cursor: `default`}\n                : {};\n\n            return (\n                <li className={genreClass} key={ genre }>\n                    <a className=\"catalog__genres-link\" onClick={() => genreItemClickHander(genre)} title={(isCurrentGenre) ? `` : genre}\n                        style={genreLinkStyle}\n                    >\n                        { genre }\n                    </a>\n                </li>\n            );\n        });\n    }\n\n    return (\n        <ul className=\"catalog__genres-list\">\n            { genresJSX }\n        </ul>\n    );\n};\n","import { useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport { filmsActions } from 'domains/films/filmsActions';\nimport * as filmsSelectors from 'domains/films/filmsSelectors';\n\nexport const useGenreFilter = () => {\n    const filter = useSelector(filmsSelectors.getFilter);\n    const dispatch = useDispatch();\n\n    const genreItemClickHander = useCallback((genre: string): void => {\n        if(genre !== filter) {\n            dispatch(filmsActions.setFilter(genre));\n        }        \n    }, [dispatch, filter]);\n\n    return {\n        filter,\n        genreItemClickHander\n    };\n}\n","import React, { FC } from 'react';\nimport { useLocation } from 'react-router-dom';\n\nimport { useLogoLinkClick } from 'hooks/useLogoLinkClick';\nimport { Routes } from 'mainConstants';\nimport { Logo } from 'components/logo/Logo';\n\nexport const Footer: FC = () => {\n    const logoLinkClickHandler = useLogoLinkClick();\n    const {pathname} = useLocation();\n    const isMainPage = pathname === Routes.MAIN_PAGE;\n\n    return (\n        <footer className=\"page-footer\">\n            <Logo isMainPage={isMainPage} logoLinkClickHandler={logoLinkClickHandler} isFooter />\n            <div className=\"copyright\">\n                <p>© 2020 What to watch Ltd.</p>\n            </div>\n        </footer>\n    );\n}\n","import React, { FC } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Map } from 'immutable';\n\nimport { Header } from 'components/header/Header';\nimport { PromoContainer } from 'components/promoContainer/PromoContainer';\nimport { FilmsListContainer } from 'components/filmsListContainer/FilmsListContainer';\nimport { GenreFilter } from 'components/genreFilter/GenreFilter';\nimport { Footer } from 'components/footer/Footer';\nimport * as promoSelectors from 'domains/promo/promoSelectors';\n\nexport const MainPage: FC = () => {\n    const promo = useSelector(promoSelectors.getPromo);\n    let divStyle = {};    \n\n    if(promo) {\n        const backgroundColor: string = (promo as Map<string, any>).get(`background_color`);\n\n        divStyle = {\n            backgroundImage: `linear-gradient(-180deg, ${backgroundColor} 0%, ${backgroundColor} 100%)`\n        }\n    }\n\n    return (\n        <>\n            <section className=\"movie-card\">\n                <Header />\n                <PromoContainer />\n            </section>\n            <div className=\"page-content\" style={ divStyle }>\n                <section className=\"catalog\">\n                    <h2 className=\"catalog__title visually-hidden\">Catalog</h2>\n                    <GenreFilter />\n                    <FilmsListContainer />\n                </section>\n                <Footer />\n            </div>\n        </>\n    );\n};\n","import { object, string } from 'yup';\n\nexport const loginFormShape = {\n    initialValues: {\n        email: ``,\n        password: ``\n    },\n    schema: object().shape({\n        email: string()\n            .min(6, `Email should be more than 6 characters`)\n            .required(`Email is required field`)\n            .email(`Invalid email`)        \n            .trim(),\n        password: string()\n            .min(6, `Password should be more than 6 characters`)\n            .max(15, `Password should be less than 15 characters`)\n            .required(`Password is required field`)\n            .trim()\n    })\n}\n\nexport const reviewFormShape = {\n    initialValues: {\n        'rating': ``,\n        'review-text': ``\n    },\n    schema: object().shape({\n        'rating': string()\n            .required(`Rating is required`),\n        'review-text': string()\n            .min(50, `Review should be more than 50 characters`)\n            .max(400, `Review should be less than 400 characters`)\n            .required(`Review is required field`)\n            .trim()\n    })\n}\n","import React, { FC, memo } from 'react';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport { useSelector } from 'react-redux';\n\nimport * as authSelectors from 'domains/auth/authSelectors';\nimport { loginFormShape } from 'formShapes';\nimport { TUserData } from 'types';\n\ntype TLoginFormProps = {\n    loginFormSubmitHandler: (userData: TUserData) => void;\n}\n\nexport const LoginForm: FC<TLoginFormProps> = memo(({loginFormSubmitHandler}) => {\n    const authError = useSelector(authSelectors.getAuthError);\n\n    return (\n        <Formik initialValues={loginFormShape.initialValues} onSubmit={loginFormSubmitHandler}\n            validationSchema={loginFormShape.schema}\n        >\n            {({ isValid }) => (\n                <Form className=\"sign-in__form\">\n                    <ErrorMessage name=\"email\">\n                        {(message) => (\n                            <div className=\"sign-in__message\">\n                                <p>{message}</p>\n                            </div>\n                        )}                   \n                    </ErrorMessage>\n                    <ErrorMessage name=\"password\">\n                        {(message) => (\n                            <div className=\"sign-in__message\">\n                                <p>{message}</p>\n                            </div>\n                        )}\n                    </ErrorMessage>\n                    {(authError) &&\n                        <div className=\"sign-in__message\">\n                            <p>We can’t recognize this email <br/> and password combination. Please try again.</p>\n                        </div>\n                    }\n                    <div className=\"sign-in__fields\">\n                        <div className=\"sign-in__field\">\n                            <Field className=\"sign-in__input\" type=\"email\" placeholder=\"Email address\" name=\"email\"\n                                id=\"user-email\"\n                            />\n                            <label className=\"sign-in__label visually-hidden\" htmlFor=\"user-email\">\n                                Email address\n                            </label>\n                        </div>\n                        <div className=\"sign-in__field\">\n                            <Field className=\"sign-in__input\" type=\"password\" placeholder=\"Password\" name=\"password\"\n                                id=\"user-password\"\n                            />\n                            <label className=\"sign-in__label visually-hidden\" htmlFor=\"user-password\">\n                                Password\n                            </label>\n                        </div>\n                    </div>\n                    <div className=\"sign-in__submit\">\n                        <button className=\"sign-in__btn\" type=\"submit\" title=\"Sign in\" disabled={!isValid}>\n                            Sign in\n                        </button>\n                    </div>\n                </Form>\n            )}\n        </Formik>\n    );\n});\n","import React, { FC } from 'react';\n\nimport { Spinner } from 'components/spinner/Spinner';\nimport { useFetchAuth } from 'hooks/useFetchAuth';\nimport { LoginForm } from 'components/loginForm/LoginForm';\n\nexport const LoginFormContainer: FC = () => {\n    const {isAuthFetching, loginFormSubmitHandler} = useFetchAuth();\n\n    if(isAuthFetching) {\n        return <Spinner />;\n    }\n\n    return (\n        <div className=\"sign-in user-page__content\">\n            <LoginForm loginFormSubmitHandler={loginFormSubmitHandler} />\n        </div> \n    );\n}\n","import { useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { authActions } from 'domains/auth/authActions';\nimport * as authSelectors from 'domains/auth/authSelectors';\nimport { TUserData } from 'types';\n\nexport const useFetchAuth = () => {\n    const dispatch = useDispatch();\n\n    const loginFormSubmitHandler = useCallback((userData: TUserData): void => {\n        const {email, password} = userData;\n\n        dispatch(authActions.fetchAuthRequest({\n            email,\n            password\n        }));\n    }, [dispatch]);\n\n    const user = useSelector(authSelectors.getUser);\n    const authError = useSelector(authSelectors.getAuthError);\n    const isAuthFetching = useSelector(authSelectors.getIsAuthFetching);\n\n    return {\n        isAuthFetching,\n        authError,\n        user,\n        loginFormSubmitHandler\n    };\n}\n","import React, { FC } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\n\nimport { Header } from 'components/header/Header';\nimport { Footer } from 'components/footer/Footer';\nimport * as authSelectors from 'domains/auth/authSelectors';\nimport { Routes } from 'mainConstants';\nimport { LoginFormContainer } from 'components/loginFormContainer/LoginFormContainer';\n\nexport const LoginPage: FC = () => {\n    const user = useSelector(authSelectors.getUser);\n\n    if(user) {\n        return <Redirect to={Routes.MAIN_PAGE} />;\n    }\n\n    return (\n        <div className=\"user-page\">\n            <Header />\n            <LoginFormContainer />\n            <Footer />\n        </div>\n    );\n}\n","import React, { FC, memo } from 'react';\nimport { Map, List } from 'immutable';\n\nimport { mapRatingToMark } from 'utils';\n\ntype TOverviewTabProps = {\n    rating: string;\n    scoresCount: number;\n    description: string;\n    director: string;\n    starring: List<Map<string, any>>;\n}\n\nexport const OverviewTab: FC<TOverviewTabProps> = memo(({rating, scoresCount, description, director, starring}) => {\n    return (\n        <>\n            <div className=\"movie-rating\">\n                <div className=\"movie-rating__score\">{rating}</div>\n                <p className=\"movie-rating__meta\">\n                    <span className=\"movie-rating__level\">{mapRatingToMark(+rating)}</span>\n                    <span className=\"movie-rating__count\">{`${scoresCount} ratings`}</span>\n                </p>\n            </div>\n            <div className=\"movie-card__text\">\n                <p>{description}</p>\n                <p className=\"movie-card__director\">\n                    <strong>{`Director: ${director}`}</strong>\n                </p>\n                <p className=\"movie-card__starring\">\n                    <strong>{`Starring: ${starring.join(`, `)}`}</strong>\n                </p>\n            </div>\n        </>\n    );\n});\n","import React, { FC, memo } from 'react';\nimport { Map, List } from 'immutable';\n\nimport { getTimeFromMins } from 'utils';\n\ntype TDetailsTabProps = {\n    released: number;\n    runTime: number;\n    genre: string;\n    director: string;\n    starring: List<Map<string, any>>;\n}\n\nexport const DetailsTab: FC<TDetailsTabProps> = memo(({ released, runTime, genre, director, starring }) => {\n    return (\n        <div className=\"movie-card__text movie-card__row\">\n            <div className=\"movie-card__text-col\">\n                <p className=\"movie-card__details-item\">\n                    <strong className=\"movie-card__details-name\">Director</strong>\n                    <span className=\"movie-card__details-value\">{ director }</span>\n                </p>\n                <p className=\"movie-card__details-item\">\n                    <strong className=\"movie-card__details-name\">Starring</strong>\n                    <span className=\"movie-card__details-value\">\n                        { starring.join(`,\\n`) }\n                    </span>\n                </p>\n            </div>\n            <div className=\"movie-card__text-col\">\n                <p className=\"movie-card__details-item\">\n                    <strong className=\"movie-card__details-name\">Run Time</strong>\n                    <span className=\"movie-card__details-value\">{getTimeFromMins(runTime)}</span>\n                </p>\n                <p className=\"movie-card__details-item\">\n                    <strong className=\"movie-card__details-name\">Genre</strong>\n                    <span className=\"movie-card__details-value\">{ genre }</span>\n                </p>\n                <p className=\"movie-card__details-item\">\n                    <strong className=\"movie-card__details-name\">Released</strong>\n                    <span className=\"movie-card__details-value\">{ released }</span>\n                </p>\n            </div>\n        </div>\n    );\n});\n","import { TState } from 'types';\n\nexport const getIsReviewsFetching = (state: TState) => state.reviews.get(`isReviewsFetching`);\n\nexport const getReviewsError = (state: TState) => state.reviews.get(`reviewsError`);\n\nexport const getReviews = (state: TState) => state.reviews.getIn([`reviews`, `data`]);\n\nexport const getReviewsId = (state: TState) => state.reviews.getIn([`reviews`, `id`]);\n\nexport const getIsReviewFetching = (state: TState) => state.reviews.get(`isReviewFetching`);\n\nexport const getReviewError = (state: TState) => state.reviews.get(`reviewError`);\n","import React, { FC, memo } from 'react';\nimport { Map } from 'immutable';    \n\nimport { mapMonthToNubmer } from 'utils';\n\ntype TReviewProps = {\n    review: Map<string, any>;\n}\n\nexport const Review: FC<TReviewProps> = memo(({ review }) => {\n    const date = new Date(Date.parse(review.get(`date`)));\n    const year = date.getFullYear();\n    const month = date.getMonth();\n    const day = date.getDate();\n\n    return (\n        <div className=\"review\">\n            <blockquote className=\"review__quote\">\n                <p className=\"review__text\">\n                    {review.get(`comment`)}\n                </p>\n                <footer className=\"review__details\">\n                    <cite className=\"review__author\">\n                        {review.getIn([`user`, `name`])}\n                    </cite>\n                    <time className=\"review__date\" dateTime={`${year}-${month + 1}-${day}`}>\n                        {`${mapMonthToNubmer(month)} ${day}, ${year}`}\n                    </time>\n                </footer>\n            </blockquote>\n            <div className=\"review__rating\">\n                {review.get(`rating`)}\n            </div>\n        </div>\n    );\n});\n","import React, { FC, memo } from 'react';\nimport { List } from 'immutable';\n\nimport { useFetchReviews } from 'hooks/useFetchReviews';\nimport { Spinner } from 'components/spinner/Spinner';\nimport { isReviews }  from 'utils';\nimport { Review } from 'components/review/Review';\n\ntype TReviewsTabProps = {\n    id: number;\n}\n\nexport const ReviewsTab: FC<TReviewsTabProps> = memo(({ id }) => {\n    const {isReviewsFetching, reviewsError, reviews} = useFetchReviews(id);\n\n    if(isReviewsFetching) {\n        return <Spinner />;\n    }\n\n    if(reviewsError) {\n        return <div>Error</div>;\n    }\n\n    let reviewsJSX: List<JSX.Element> | undefined;\n    let leftColReviewsJSX: List<JSX.Element> | undefined;\n    let rightColReviewsJSX: List<JSX.Element> | undefined;\n\n    if(isReviews(reviews)) {\n        reviewsJSX = reviews.sort((a, b) => Date.parse(b.get(`date`)) - Date.parse(a.get(`date`)))\n                            .map((review) => <Review review={review} key={review.get(`id`)} />);\n\n        leftColReviewsJSX = reviewsJSX.filter((_, ind) => !(ind % 2));\n        rightColReviewsJSX = reviewsJSX.filter((_, ind) => ind % 2);\n    }\n    \n    return (\n        <div className = \"movie-card__reviews movie-card__row\">\n            {(reviewsJSX) &&\n                <>\n                    <div className=\"movie-card__reviews-col\">\n                        {leftColReviewsJSX}\n                    </div>\n                    <div className=\"movie-card__reviews-col\">\n                        {rightColReviewsJSX}\n                    </div>\n                </>\n            }\n            {(!reviewsJSX) && <div>No reviews yet. Your will be the first!</div>}\n        </div>\n    );\n});\n","import { useEffect } from 'react';\nimport { useDispatch, useSelector} from 'react-redux';\n\nimport { reviewsActions } from 'domains/reviews/reviewsActions';\nimport * as reviewsSelectors from 'domains/reviews/reviewsSelectors';\n\nexport const useFetchReviews = (id: number) => {\n    const dispatch = useDispatch();\n    const reviews = useSelector(reviewsSelectors.getReviews);\n    const reviewsId = useSelector(reviewsSelectors.getReviewsId);\n\n    useEffect(() => {\n        if(reviewsId !== id) {\n            dispatch(reviewsActions.fetchReviewsRequest(id));\n        }\n    }, [dispatch, id, reviewsId, reviews]);\n\n    const reviewsError = useSelector(reviewsSelectors.getReviewsError);\n    const isReviewsFetching = useSelector(reviewsSelectors.getIsReviewsFetching);\n\n    return {\n        isReviewsFetching,\n        reviewsError,\n        reviews\n    };\n}\n","import React, { FC, memo, useEffect, useState, useCallback } from 'react';\nimport { Map, List } from 'immutable';\nimport cn from 'classnames';\n\nimport { Header } from 'components/header/Header';\nimport { OverviewTab } from 'components/overviewTab/OverviewTab';\nimport { DetailsTab } from 'components/detailsTab/DetailsTab';\nimport { ReviewsTab } from 'components/reviewsTab/ReviewsTab';\nimport { usePlayingVideo } from 'hooks/usePlayingVideo';\nimport { FilmButtons } from 'components/filmButtons/FilmButtons';\nimport { VideoPlayer } from 'components/videoPlayer/VideoPlayer';\nimport { useSetFilm } from 'hooks/useSetFilm';\n\ntype TDetailedFilmProps = {\n    film: Map<string, any>;\n}\n\nexport const DetailedFilm: FC<TDetailedFilmProps> = memo(({ film }) => {\n    const [currentTab, setCurrentTab] = useState(`Overview`);\n\n    useEffect(() => {\n        window.scrollTo(0, 0);\n    }, [film]);\n\n    useEffect(() => {\n        return function clean() {\n            setCurrentTab(`Overview`);\n        }\n    }, [film]);\n\n    useSetFilm(film);\n\n    const {isPlaying, handleExitBtnClick, playBtnClickHandler, videoRef, isVideoLoading,\n        onCanPlayThroughHandler} = usePlayingVideo();\n\n    const navLinkClickHandler = useCallback((tab: string): void => {\n        setCurrentTab(tab);\n    }, []);\n\n    const posterImage: string = film.get(`poster_image`);\n    const name: string = film.get(`name`);\n    const genre: string = film.get(`genre`);\n    const released: number = film.get(`released`);\n    const runTime: number = film.get(`run_time`);\n    const director: string = film.get(`director`);\n    const starring: List<Map<string, any>> = film.get(`starring`);\n\n    const tabs: string[] = [`Overview`, `Details`, `Reviews`];\n    const navLinksJSX: JSX.Element[] = tabs.map((tab) => {\n        const isCurrentTab = tab === currentTab;\n        const navItemClass = cn(`movie-nav__item`, {\n            'movie-nav__item--active': isCurrentTab\n        });\n\n        const navLinkStyle = (isCurrentTab)\n            ? {cursor: `default`}\n            : {};\n\n        return (\n            <li className={navItemClass} key={ tab }>\n                <a className=\"movie-nav__link\" onClick={() => navLinkClickHandler(tab)}\n                    title={(isCurrentTab) ? `` : tab} style={navLinkStyle}\n                >\n                    { tab }\n                </a>\n            </li>\n        );\n    });\n    \n    return (\n        <>\n            <div className=\"movie-card__hero\">\n                <Header film={film} />\n                <div className=\"movie-card__wrap\">\n                    <div className=\"movie-card__desc\">\n                        <h2 className=\"movie-card__title\">{name}</h2>\n                        <p className=\"movie-card__meta\">\n                            <span className=\"movie-card__genre\">{genre}</span>\n                            <span className=\"movie-card__year\">{released}</span>\n                        </p>\n                        <div className=\"movie-card__buttons\">\n                            {<FilmButtons playBtnClickHandler={playBtnClickHandler} detailed />}\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div className=\"movie-card__wrap movie-card__translate-top\">\n                <div className=\"movie-card__info\">\n                    <div className=\"movie-card__poster movie-card__poster--big\">\n                        <img src={posterImage} alt={`${name} poster`} width=\"218\" height=\"327\" />\n                    </div>\n                    <div className=\"movie-card__desc\">\n                        <nav className=\"movie-nav movie-card__nav\">\n                            <ul className=\"movie-nav__list\">\n                                {navLinksJSX}\n                            </ul>\n                        </nav>\n                        {(currentTab === `Overview`) &&\n                            <OverviewTab rating={film.get(`rating`).toFixed(1)} scoresCount={film.get(`scores_count`)}\n                                description={film.get(`description`)} director={director} starring={starring}\n                            />\n                        }\n                        {(currentTab === `Details`) &&\n                            <DetailsTab genre={genre} released={released} runTime={runTime}\n                                director={director} starring={starring}\n                            />\n                        }\n                        {(currentTab === `Reviews`) && <ReviewsTab id={film.get(`id`)} />}                  \n                    </div>\n                    <VideoPlayer src={film.get(`video_link`)} posterImage={posterImage} runTime={runTime} ref={videoRef}\n                        handleExitBtnClick={handleExitBtnClick} onCanPlayThroughHandler={onCanPlayThroughHandler}\n                        isVideoLoading={isVideoLoading} isPlaying={isPlaying}\n                    />\n                </div>\n            </div>\n        </>\n    );\n});\n","import { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Map } from 'immutable';\n\nimport { filmsActions } from 'domains/films/filmsActions';\nimport * as filmsSelectors from 'domains/films/filmsSelectors';\n\nexport const useSetFilm = (film: Map<string, any>) => {\n    const dispatch = useDispatch();\n    const currentFilm = useSelector(filmsSelectors.getFilm);\n\n    useEffect(() => {\n        if(!currentFilm || (currentFilm as Map<string, any>).get(`id`) !== film.get(`id`)) {\n            dispatch(filmsActions.setFilm(film));\n        }\n    }, [dispatch, film, currentFilm]);\n} \n","import React, { FC, memo } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Map, List } from 'immutable';\n\nimport { selectSimilarFilmsFactory } from 'domains/films/filmsSelectors';\nimport { Film } from 'components/film/Film';\nimport { isFilms } from 'utils';\n\ntype TSimilarFilmsProps = {\n    film: Map<string, any>;\n}\n\nexport const SimilarFilms: FC<TSimilarFilmsProps> = memo(({ film }) => {\n    const similarFilms = useSelector(selectSimilarFilmsFactory(film));\n    const filmsJSX: List<JSX.Element> =\n        (similarFilms as List<Map<string, any>>).map((film) => <Film key={film.get(`id`)} film={film} />);\n\n    if(!isFilms(similarFilms)) {\n        return null;\n    }\n\n    return (\n        <section className=\"catalog catalog--like-this\">\n            <h2 className=\"catalog__title\">More like this</h2>\n            <div className=\"catalog__movies-list\">\n                {filmsJSX}\n            </div>\n        </section>\n    );\n});\n","import React, { FC } from 'react';\nimport { useParams, Redirect } from 'react-router-dom';\nimport { Map } from 'immutable';\n\nimport { Header } from 'components/header/Header';\nimport { Spinner } from 'components/spinner/Spinner';\nimport { Routes } from 'mainConstants';\nimport { isFilms } from 'utils';\nimport { Footer } from 'components/footer/Footer';\nimport { useFetchFilms } from 'hooks/useFetchFilms';\nimport { DetailedFilm } from 'components/detailedFilm/DetailedFilm';\nimport { SimilarFilms } from 'components/similarFilms/SimilarFilms';\n\nexport const FilmPage: FC = () => {\n    const {id} = useParams();\n    const {isFilmsFetching, filmsError, films} = useFetchFilms();\n    let film;\n\n    if(isFilmsFetching) {\n        return (\n            <div className=\"movie-card__hero\">\n                <Header />\n                <Spinner />\n            </div>\n        );\n    }\n\n    if(filmsError) {\n        return (\n            <div className=\"movie-card__hero\">\n                <Header />\n                <div>Error</div>\n            </div>\n        );\n    }\n\n    if(isFilms(films)) {\n        film = films.find((film) => film.get(`id`) === +id);\n    }\n\n    if(!film) {\n        return <Redirect to={Routes.MAIN_PAGE} />;\n    }\n\n    const backgroundColor: string = film.get(`background_color`);\n    const divStyle = {\n        backgroundImage: `linear-gradient(-180deg, ${backgroundColor} 0%, ${backgroundColor} 100%)`\n    }\n    const sectionStyle = {\n        backgroundColor\n    }\n\n    return (\n        <>\n            <section className=\"movie-card movie-card--full\" style={sectionStyle}>\n                <DetailedFilm film={ film } />\n            </section>\n            <div className=\"page-content\" style={divStyle}>\n                <SimilarFilms film={ film } />\n                <Footer />\n            </div>\n        </>\n    );\n}\n","import React, { FC, ChangeEvent, memo } from 'react';\n\ntype TRadioBtnProps = {\n    value: number;\n    groupValue: string;\n    disabled: boolean;\n    field: {\n        onChange: (e: ChangeEvent<any>) => void;\n        onBlur: () => void;\n    }\n}\n\nexport const RadioBtn: FC<TRadioBtnProps> = memo(({ value, groupValue, disabled, field: {onChange, onBlur}}) => (\n    <>\n        <input className=\"rating__input\" id={`star-${value}`} type=\"radio\" name=\"rating\" value={ value }\n            checked={ value === +groupValue } onChange={onChange} onBlur={onBlur} disabled={ disabled }\n        />\n        <label className=\"rating__label\" htmlFor={`star-${value}`}>\n            {`Rating-${value}`}\n        </label>\n    </>\n));\n","import React, { FC, Children, memo } from 'react';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\n\nimport { reviewFormShape } from 'formShapes';\nimport { RadioBtn } from 'components/radioBtn/RadioBtn';\nimport { TUserReview } from 'types';\n\ntype TReviewFormProps = {\n    reviewFormSubmitHandler: (userReview: TUserReview) => void;\n    isReviewFetching: boolean;\n}\n\nexport const ReviewForm: FC<TReviewFormProps> = memo(({ isReviewFetching, reviewFormSubmitHandler }) => {\n    return (\n        <Formik initialValues={reviewFormShape.initialValues} onSubmit={reviewFormSubmitHandler}\n            validationSchema={reviewFormShape.schema}\n        >\n            {({ values, isValid }) => (\n                <Form className=\"add-review__form\">\n                    <ErrorMessage name=\"rating\">\n                        {(message) => <div className=\"review__message\">{message}</div>}\n                    </ErrorMessage>\n                    <ErrorMessage name=\"review-text\">\n                        {(message) => <div className=\"review__message\">{message}</div>}\n                    </ErrorMessage>\n                    <div className=\"rating\">\n                        <div className=\"rating__stars\">\n                            {\n                                Children.toArray(new Array(5).fill(``).map(( _, ind ) => (\n                                    <Field component={RadioBtn} value={5 - ind} groupValue={values.rating}\n                                        disabled={isReviewFetching}\n                                    />\n                                )))\n                            }\n                        </div>\n                    </div>\n                    <div className=\"add-review__text\">\n                        <Field className=\"add-review__textarea\" as=\"textarea\" name=\"review-text\" id=\"review-text\"\n                            placeholder=\"Review text\" disabled={ isReviewFetching }\n                        />\n                        <div className=\"add-review__submit\">\n                            <button className=\"add-review__btn\" type=\"submit\" title=\"Post\"\n                                disabled={ !isValid || isReviewFetching }\n                            >\n                                Post\n                        </button>\n                        </div>\n                    </div>\n                </Form>\n            )}\n        </Formik>\n    );\n});\n","import React, { FC, useCallback } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport { useFetchReview } from 'hooks/useFetchReview';\nimport { ReviewForm } from 'components/reviewForm/ReviewForm';\nimport { TUserReview } from 'types';\nimport { Notification } from 'components/notification/Notification';\n\nexport const ReviewFormContainer: FC = () => {\n    const {id} = useParams();    \n    const {isReviewFetching, reviewError, reviewFormSubmitHandler} = useFetchReview();\n    const verifiedIsReviewFetching = (isReviewFetching as boolean);\n\n    const handleReviewFormSubmit = useCallback((userReview: TUserReview) => {\n        reviewFormSubmitHandler(+id, userReview);\n    }, [id, reviewFormSubmitHandler]);\n\n    if(reviewError) {\n        return <div>Error</div>;\n    }\n\n    return (\n        <>\n            <ReviewForm isReviewFetching={verifiedIsReviewFetching} reviewFormSubmitHandler={handleReviewFormSubmit} />\n            {(isReviewFetching ) &&\n                <Notification>\n                    Sending your review... Please, wait\n                </Notification>\n            }\n        </>\n    );\n}\n","import { useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { reviewsActions } from 'domains/reviews/reviewsActions';\nimport * as reviewsSelectors from 'domains/reviews/reviewsSelectors';\nimport { TUserReview } from 'types';\n\nexport const useFetchReview = () => {\n    const dispatch = useDispatch();\n\n    const reviewFormSubmitHandler = useCallback((id: number, userReview: TUserReview): void => {    \n        dispatch(reviewsActions.fetchReviewRequest(id, userReview));\n    }, [dispatch]);\n\n    const reviewError = useSelector(reviewsSelectors.getReviewError);\n    const isReviewFetching = useSelector(reviewsSelectors.getIsReviewFetching);\n\n    return {\n        isReviewFetching,\n        reviewError,\n        reviewFormSubmitHandler\n    };\n}\n","import React, { FC } from 'react';\nimport { Redirect, useParams } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { Map } from 'immutable';\n\nimport * as authSelectors from 'domains/auth/authSelectors';\nimport { Routes } from 'mainConstants';\nimport { Header } from 'components/header/Header';\nimport { Footer } from 'components/footer/Footer';\nimport * as filmsSelectors from 'domains/films/filmsSelectors';\nimport { isFilms } from 'utils';\nimport { ReviewFormContainer } from 'components/reviewFormContainer/ReviewFormContainer';\n\nexport const ReviewPage: FC = () => {\n    const user = useSelector(authSelectors.getUser);\n    const films = useSelector(filmsSelectors.getFilms);\n    const {id} = useParams();\n\n    let film;\n    let sectionStyle = {};    \n\n    if(isFilms(films)) {\n        film = films.find((film) => film.get(`id`) === +id);\n\n        const backgroundColor: string = (film as Map<string, any>).get(`background_color`);\n\n        sectionStyle = { backgroundColor };\n    }\n\n    if(!user) {\n        return <Redirect to={Routes.LOGIN_PAGE} />;\n    }\n\n    return (\n        <section className=\"movie-card movie-card--full\" style={ sectionStyle }>\n            <div className=\"movie-card__header\">\n                <Header film={ film } />\n            </div>\n            <div className=\"add-review\">\n                <ReviewFormContainer />\n            </div>\n            <Footer />\n        </section>\n    );\n}\n","import React, { FC } from 'react';\nimport { Map, List } from 'immutable';\n\nimport { FilmsList } from 'components/filmsList/FilmsList';\nimport { useFetchFavorites } from 'hooks/useFetchFavorites';\nimport { Spinner } from 'components/spinner/Spinner';\nimport { isFilms } from 'utils';\n\nexport const FavoritesFilmsContainer: FC = () => {\n    const {isFavoritesFetching, favoritesError, favorites} = useFetchFavorites();\n\n    if(isFavoritesFetching) {\n        return <Spinner />;\n    }\n\n    if(favoritesError) {\n        return <div>Error</div>;\n    }\n\n    let favoritesList: List<Map<string, any>> | undefined;\n\n    if(isFilms(favorites)) {\n        favoritesList = favorites;\n    } else {\n        return <div>Your list of favorite films is empty!</div>;\n    }\n\n\n    return <FilmsList films={favoritesList} />;\n}\n","import { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { favoritesActions } from 'domains/favorites/favoritesActions';\nimport * as favoritesSelectors from 'domains/favorites/favoritesSelectors';\n\nexport const useFetchFavorites = () => {\n    const dispatch = useDispatch();\n    const favorites = useSelector(favoritesSelectors.getFavorites);\n\n    useEffect(() => {\n        dispatch(favoritesActions.fetchFavoritesRequest());\n    }, [dispatch]);\n\n    const favoritesError = useSelector(favoritesSelectors.getFavoritesError);\n    const isFavoritesFetching = useSelector(favoritesSelectors.getIsFavoritesFetching);\n    \n    return {\n        isFavoritesFetching,\n        favoritesError,\n        favorites\n    };\n}\n","import React, { FC } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\n\nimport * as authSelectors from 'domains/auth/authSelectors';\nimport { Routes } from 'mainConstants';\nimport { Header } from 'components/header/Header';\nimport { Footer } from 'components/footer/Footer';\nimport { FavoritesFilmsContainer } from 'components/favoritesFilmsContainer/FavoritesFilmsContainer';\n\nexport const FavoritesPage: FC = () => {\n    const user = useSelector(authSelectors.getUser);\n\n    if(!user) {\n        return <Redirect to={Routes.LOGIN_PAGE} />;\n    }\n\n    return (\n        <div className=\"user-page\">\n            <Header />\n            <section className=\"catalog\">\n                <h2 className=\"catalog__title visually-hidden\">Catalog</h2>\n                <FavoritesFilmsContainer />\n            </section>\n            <Footer />\n        </div>\n    );\n}\n","import React, { FC } from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\n\nimport { Routes }  from 'mainConstants';\nimport { MainPage } from 'pages/mainPage/MainPage';\nimport { LoginPage } from 'pages/loginPage/LoginPage';\nimport { FilmPage } from 'pages/filmPage/FilmPage';\nimport { ReviewPage } from 'pages/reviewPage/ReviewPage';\nimport { FavoritesPage } from 'pages/favoritesPage/FavoritesPage';\nimport { useFetchAuthStatus } from 'hooks/useFetchAuthStatus';\n\nexport const App: FC = () => {\n    useFetchAuthStatus();\n\n    return (\n        <Switch>\n            <Route path={Routes.MAIN_PAGE} component={MainPage} exact />\n            <Route path={Routes.LOGIN_PAGE} component={LoginPage} exact />\n            <Route path={Routes.FILM_PAGE} component={FilmPage} exact />\n            <Route path={Routes.REVIEW_PAGE} component={ReviewPage} exact />\n            <Route path={Routes.FAVORITES_PAGE} component={FavoritesPage} exact />\n            <Redirect to={Routes.MAIN_PAGE} />\n        </Switch>\n    );\n}\n","import { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { authActions } from 'domains/auth/authActions';\n\nexport const useFetchAuthStatus = () => {\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        dispatch(authActions.fetchAuthStatusRequest());\n    }, [dispatch]);\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { ConnectedRouter as Router } from 'connected-react-router/immutable';\nimport { PersistGate } from 'redux-persist/integration/react';\n\nimport { history } from 'init/rootReducer';\nimport { persistedStore, store } from 'init/store';\nimport { App } from 'components/app/App';\nimport { Spinner } from 'components/spinner/Spinner';\nimport App2 from './components/app/App2';\n\nconst renderApp = () => ReactDOM.render(\n    <Provider store={store}>\n        <Router history={history}>\n            <PersistGate persistor={persistedStore} loading={<Spinner />}>\n                <App />\n            </PersistGate>\n        </Router>\n    </Provider>,\n    document.querySelector(`#root`)\n);\n\nif(module.hot && process.env.NODE_ENV !== `production`) {\n    module.hot.accept(`./components/app/App.tsx`, renderApp);\n}\n\nrenderApp();\n"],"sourceRoot":""}